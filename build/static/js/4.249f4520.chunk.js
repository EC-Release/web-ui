(this["webpackJsonpec-admin-webui"]=this["webpackJsonpec-admin-webui"]||[]).push([[4,21],{33:function(e,t,a){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}a.d(t,"a",(function(){return s}))},34:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(33);function n(e,t){if(e){if("string"===typeof e)return Object(s.a)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(s.a)(e,t):void 0}}},35:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(34);function n(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(s.a)(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw r}}}}},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(33);var n=a(34);function r(e){return function(e){if(Array.isArray(e))return Object(s.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},37:function(e,t,a){e.exports=a.p+"static/media/icon_greensortingdown.7d91f50e.svg"},38:function(e,t,a){e.exports=a.p+"static/media/icondelete_tablemaintainmonitor.ba23f6b1.svg"},39:function(e,t,a){e.exports=a.p+"static/media/iconedit_tablemaintainmonitor.f1791879.svg"},40:function(e,t,a){e.exports=a.p+"static/media/info.dffb9c37.svg"},43:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var s=a(2),n=a(3),r=a(5),i=a(4),l=a(0),o=a.n(l),c=a(1),d=a.n(c),m=a(37),u=a.n(m),p=a(40),h=a.n(p),b=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={subscriptionForm:{licenseId:{value:"",dirtyState:!1},emailAddress:{value:"",dirtyState:!1},sso:{value:"",dirtyState:!1},date:{value:"",dirtyState:!1},desc:{value:"",dirtyState:!1},username:{value:"",dirtyState:!1},key:"",parent:"",name:""},errorsSubscriptionForm:{},subscriptionFormIsValid:!1,confidentialities:[{name:"True",id:"true"},{name:"False",id:"false"}],environments:[{name:"DEV",id:"DEV"},{name:"TEST",id:"TEST"},{name:"STAGE",id:"STAGE"},{name:"PROD",id:"PROD"}],optInoptOuts:[{name:"True",id:"true"},{name:"False",id:"false"}],preserves:[{name:"True",id:"true"},{name:"False",id:"false"}]},n}return Object(n.a)(a,[{key:"enableToolTip",value:function(){setTimeout((function(){d()('[data-toggle="popover"]').popover()}),1e3)}},{key:"componentDidMount",value:function(){var e=Object.assign({},this.props.editItemData),t={date:{value:e.date,dirtyState:!1},licenseId:{value:e.licenseId,dirtyState:!1},emailAddress:{value:e.emailAddress,dirtyState:!1},desc:{value:e.desc,dirtyState:!1},username:{value:e.username,dirtyState:!1},sso:{value:e.sso,dirtyState:!1},key:e.key,parent:e.parent,name:e.name};this.setState({subscriptionForm:t}),this.enableToolTip();var a=this;setTimeout((function(){a.handleFormValidation()}),1e3)}},{key:"editSubscription",value:function(){var e=this;this.props.showGlobalMessage(!0,!0,"Please wait...","custom-success");var t=Object.assign({},this.state.subscriptionForm),a={};a.licenseId=t.licenseId.value,a.emailAddress=t.emailAddress.value,a.username=t.username.value,a.desc=t.desc.value,a.sso=t.sso.value,a.date=t.date.value,a.parent=t.parent,a.name=t.name,console.log(a),fetch(this.props.baseUrl+t.key,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken},body:JSON.stringify(a)}).then((function(a){200===a.status?a.json().then((function(a){e.props.showGlobalMessage(!1,!0,"Record saved successfully","custom-success"),e.props.handleDataTable(!0),setTimeout((function(){e.props.hideGlobalMessage()}),2e3);var s=JSON.parse(sessionStorage.getItem("snapshotData")),n=[];Object.keys(s).forEach((function(e){n.push(s[e])})),n.forEach((function(e,a){e.parent&&e.key===t.key&&(e.licenseId=t.licenseId.value,e.emailAddress=t.emailAddress.value,e.username=t.username.value,e.desc=t.desc.value,e.sso=t.sso.value,e.date=t.date.value,e.parent=t.parent,e.name=t.name)})),sessionStorage.setItem("snapshotData",JSON.stringify(n))})):(e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3))})).catch((function(t){console.log(t),e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3)}))}},{key:"handleFormValidation",value:function(){var e=this.state.subscriptionForm,t=e.emailAddress.value,a=e.emailAddress.dirtyState,s=e.username.value,n=e.username.dirtyState,r=e.date.value,i=e.date.dirtyState,l=!0,o={};""===t.trim()&&(a&&(o.emailAddress="Please enter Email Address"),l=!1),""===s.trim()&&(n&&(o.username="Please enter Username"),l=!1),""===r.trim()&&(i&&(o.date="Please enter Expiry Date"),l=!1),this.setState({subscriptionFormIsValid:l,errorsSubscriptionForm:o})}},{key:"handleFormData",value:function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value,s=Object.assign({},this.state.subscriptionForm);"licenseId"===t?(s.licenseId.value=a,s.licenseId.dirtyState=!0):"emailAddress"===t?(s.emailAddress.value=a,s.emailAddress.dirtyState=!0):"sso"===t?(s.sso.value=a,s.sso.dirtyState=!0):"date"===t?(s.date.value=a,s.date.dirtyState=!0):"desc"===t?(s.desc.value=a,s.desc.dirtyState=!0):"username"===t&&(s.username.value=a,s.username.dirtyState=!0),this.setState({subscriptionForm:s}),this.handleFormValidation()}},{key:"showHideField",value:function(e,t,a){var s=Object.assign({},this.state.subscriptionForm);"password"===s[a].type?s[a].type="text":s[a].type="password",this.setState({subscriptionForm:s})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"row Subscriptioncreate"},o.a.createElement("div",{className:"col-md-12 mt-2"},o.a.createElement("div",{className:"centered-div"},o.a.createElement("div",{className:"centered-div-header"},o.a.createElement("div",{className:"row maintainagentcreate-header"},o.a.createElement("div",{className:"col-md-12"},this.props.isViewOnly?o.a.createElement("h6",{id:"maintainsubscriptioncreate-title"},"View Subscription ",o.a.createElement("small",null,"View parameters.")):o.a.createElement("h6",{id:"maintainsubscriptioncreate-title"},"Edit Subscription ",o.a.createElement("small",null,"Creating parameters.")))),o.a.createElement("hr",null),o.a.createElement("div",{className:"changeable-form subscription-form"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("div",{className:"col-sm-12 label required"},"License ID",o.a.createElement("img",{alt:"down-arrow",src:u.a}),o.a.createElement("span",{className:"float-right help-text"},o.a.createElement("img",{alt:"info",src:h.a,"data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":this.props.helpText.licenseId}))),o.a.createElement("div",{className:"col-sm-12 mb-2"},o.a.createElement("input",{type:"text",className:"form-control form-control-sm",name:"licenseId",readOnly:!0,value:this.state.subscriptionForm.licenseId.value}),o.a.createElement("small",{className:"text-danger"},this.state.errorsSubscriptionForm.licenseId))),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("div",{className:"col-sm-12 label required"},"Expiry Date/Time",o.a.createElement("img",{alt:"down-arrow",src:u.a}),o.a.createElement("span",{className:"float-right help-text"},o.a.createElement("img",{alt:"info",src:h.a,"data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":this.props.helpText.expdate}))),o.a.createElement("div",{className:"col-sm-12 mb-2"},o.a.createElement("input",{type:"text",className:"form-control form-control-sm",name:"date",disabled:this.props.isViewOnly,value:this.state.subscriptionForm.date.value,onChange:function(t){e.handleFormData(t)}}),o.a.createElement("small",{className:"text-danger"},this.state.errorsSubscriptionForm.date)))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("div",{className:"col-sm-12 label required"},"Email Address",o.a.createElement("img",{alt:"down-arrow",src:u.a}),o.a.createElement("span",{className:"float-right help-text"},o.a.createElement("img",{alt:"info",src:h.a,"data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":this.props.helpText.emailAddress}))),o.a.createElement("div",{className:"col-sm-12 mb-2"},o.a.createElement("input",{type:"text",className:"form-control form-control-sm",name:"emailAddress",disabled:this.props.isViewOnly,value:this.state.subscriptionForm.emailAddress.value,onChange:function(t){e.handleFormData(t)}}),o.a.createElement("small",{className:"text-danger"},this.state.errorsSubscriptionForm.emailAddress))),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("div",{className:"col-sm-12 label required"},"SSO",o.a.createElement("img",{alt:"down-arrow",src:u.a}),o.a.createElement("span",{className:"float-right help-text"},o.a.createElement("img",{alt:"info",src:h.a,"data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":this.props.helpText.sso}))),o.a.createElement("div",{className:"col-sm-12 mb-2"},o.a.createElement("input",{type:"text",className:"form-control form-control-sm",name:"sso",disabled:this.props.isViewOnly,value:this.state.subscriptionForm.sso.value,onChange:function(t){e.handleFormData(t)}}),o.a.createElement("small",{className:"text-danger"},this.state.errorsSubscriptionForm.sso)))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("div",{className:"col-sm-12 label required"},"User Fullname",o.a.createElement("img",{alt:"down-arrow",src:u.a}),o.a.createElement("span",{className:"float-right help-text"},o.a.createElement("img",{alt:"info",src:h.a,"data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":this.props.helpText.username}))),o.a.createElement("div",{className:"col-sm-12 mb-2"},o.a.createElement("input",{type:"text",className:"form-control form-control-sm",name:"username",disabled:this.props.isViewOnly,value:this.state.subscriptionForm.username.value,onChange:function(t){e.handleFormData(t)}}),o.a.createElement("small",{className:"text-danger"},this.state.errorsSubscriptionForm.username))),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("div",{className:"col-sm-12 label required"},"Description",o.a.createElement("img",{alt:"down-arrow",src:u.a}),o.a.createElement("span",{className:"float-right help-text"},o.a.createElement("img",{alt:"info",src:h.a,"data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":this.props.helpText.desc}))),o.a.createElement("div",{className:"col-sm-12 mb-2"},o.a.createElement("input",{type:"text",className:"form-control form-control-sm",name:"desc",disabled:this.props.isViewOnly,value:this.state.subscriptionForm.desc.value,onChange:function(t){e.handleFormData(t)}}),o.a.createElement("small",{className:"text-danger"},this.state.errorsSubscriptionForm.desc)))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-12 mb-2 text-center"},this.props.isViewOnly?null:o.a.createElement("button",{id:"create-subscription-btn",disabled:!this.state.subscriptionFormIsValid,onClick:this.editSubscription.bind(this),className:"btn btn-sm customize-view-btn"},"EDIT LICENSE"),o.a.createElement("button",{onClick:this.props.changeView.bind(this),className:"btn btn-sm customize-view-btn ml-2"},"BACK"))))))))}}]),a}(o.a.Component)},68:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var s=a(36),n=a(35),r=a(2),i=a(3),l=a(5),o=a(4),c=a(0),d=a.n(c),m=a(1),u=a.n(m),p=a(43),h=a(39),b=a.n(h),v=a(38),f=a.n(v),g=a(6),y=a.n(g),E=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={tableData:[],newTableData:[],viewTable:!0,editItemData:{},searchString:"",showTableInit:!1},s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleDataTable(!1)}},{key:"handleDataTable",value:function(e){var t=this,a=[];if(null!==sessionStorage.getItem("snapshotData")){var s=JSON.parse(sessionStorage.getItem("snapshotData")),n=[];Object.keys(s).forEach((function(e){n.push(s[e])}));for(var r=0,i=n;r<i.length;r++){var l=i[r];l.parent&&"ab2a2691-a563-486c-9883-5111ff36ba9b"===l.parent&&a.push(l)}this.generateTableStructure(a,e),this.setState({tableData:a})}else this.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){t.props.hideGlobalMessage()}),2e3)}},{key:"initTable",value:function(e,t){var a;a=u()("#subscriptionupgradeTableDiv")[0].offsetWidth-200,u()("#"+e).DataTable({dom:'rt<"bottom"lp>',bSort:!0,scrollX:!0,language:{paginate:{previous:"<",next:">"}},createdRow:function(e,t,s){for(var n=0;n<t.length;n++)u()("td:eq("+n+")",e).css("min-width",a/t.length+"px")},pageLength:5,stateSave:t,destroy:!0,fnDrawCallback:function(e){e.aiDisplay.length<=5?u()(".dataTables_paginate").hide():u()(".dataTables_paginate").show()}}),u()(".bottom").addClass("row"),u()(".dataTables_length").addClass("col-sm-6"),u()(".dataTables_paginate").addClass("col-sm-6")}},{key:"generateTableStructure",value:function(e,t){var a,s=this,r=e,i=[],l=Object(n.a)(r);try{for(l.s();!(a=l.n()).done;){var o=a.value,c={};c.licenseId=o.licenseId,c.emailAddress=o.emailAddress,c.date=o.date,c.sso=o.sso,c.desc=o.desc,c.username=o.username,c.key=o.key,c.parent=o.parent,c.name=o.name,i.push(c)}}catch(d){l.e(d)}finally{l.f()}this.setState({newTableData:i,showTableInit:!0}),setTimeout((function(){s.initTable("subscriptionupgradeTable",t)}),100)}},{key:"showHideTableTdData",value:function(e,t){var a=Object(s.a)(this.state.newTableData),n=Object.assign({},a[e]);if("subscriptionId"===t){var r=n.subscriptionId;n.subscriptionId=n.subscriptionIdHidden,n.subscriptionIdHidden=r,n.subscriptionIdHiddenFlag=!n.subscriptionIdHiddenFlag,a[e]=n}else if("serviceUri"===t){var i=n.serviceUri;n.serviceUri=n.serviceUriHidden,n.serviceUriHidden=i,n.serviceUriHiddenFlag=!n.serviceUriHiddenFlag,a[e]=n}else if("subscriptionName"===t){var l=n.subscriptionName;n.subscriptionName=n.subscriptionNameHidden,n.subscriptionNameHidden=l,n.subscriptionNameHiddenFlag=!n.subscriptionNameHiddenFlag,a[e]=n}else if("uaaUrl"===t){var o=n.uaaUrl;n.uaaUrl=n.uaaUrlHidden,n.uaaUrlHidden=o,n.uaaUrlHiddenFlag=!n.uaaUrlHiddenFlag,a[e]=n}this.setState({newTableData:a})}},{key:"filterByValue",value:function(e,t){for(var a=[],s=0;s<e.length;s++)(e[s].licenseId.toLowerCase().includes(t.toLowerCase())||e[s].emailAddress.toLowerCase().includes(t.toLowerCase())||e[s].date.includes(t)||e[s].sso.includes(t)||e[s].username.includes(t))&&a.push(e[s]);return a}},{key:"destroyDataTable",value:function(e){u()("#"+e).DataTable().destroy()}},{key:"filterData",value:function(e){var t=this;this.destroyDataTable("subscriptionupgradeTable");var a=e.target.value.trim(),r=e.target.value,i=Object(s.a)(this.state.tableData),l=[],o=[];l=""!==a?this.filterByValue(i,a):i;var c,d=Object(n.a)(l);try{for(d.s();!(c=d.n()).done;){var m=c.value,u={};u.licenseId=m.licenseId,u.emailAddress=m.emailAddress,u.date=m.date,u.sso=m.sso,u.desc=m.desc,u.username=m.username,o.push(u)}}catch(p){d.e(p)}finally{d.f()}this.setState({newTableData:o,searchString:r}),setTimeout((function(){t.initTable("subscriptionupgradeTable",!1)}),0)}},{key:"edit",value:function(e){var t=Object.assign({},e);this.destroyDataTable("subscriptionupgradeTable"),this.setState({editItemData:t,viewTable:!1})}},{key:"removeDataTableRow",value:function(e,t){u()("#"+e).DataTable().row("#"+e+"TbodyTr_"+t).remove().draw(!1)}},{key:"deleteData",value:function(e,t){var a=this;window.confirm("Are you sure you want to delete")&&(this.props.showGlobalMessage(!0,!0,"Please Wait....","custom-success"),fetch(this.props.baseUrl+e.key,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){if(200===e.status)e.json().then((function(e){a.props.showGlobalMessage(!1,!0,"Record deleted successfuly","custom-success"),a.removeDataTableRow("subscriptionupgradeTable",t);var s=a;setTimeout((function(){s.props.hideGlobalMessage()}),2e3),s.snapshotUpdate()}));else{a.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger");var s=a;setTimeout((function(){s.props.hideGlobalMessage()}),2e3)}})).catch((function(e){console.log(e),a.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){a.props.hideGlobalMessage()}),2e3)})))}},{key:"snapshotUpdate",value:function(){fetch(this.props.baseUrl+"snapshot",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status&&e.json().then((function(e){sessionStorage.setItem("snapshotData",JSON.stringify(e))}))}))}},{key:"changeView",value:function(){var e=this;this.handleDataTable(!1),this.setState({viewTable:!0}),setTimeout((function(){e.initTable("subscriptionupgradeTable",!0)}),0)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,this.state.viewTable?d.a.createElement("div",{className:"row Subscriptionupgrade"},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("div",{className:"row mt-2"},d.a.createElement("div",{className:"col-sm-6 text-left"},d.a.createElement("div",{className:"d-inline"},d.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary disabled"},d.a.createElement("i",{className:"fa fa-filter"}),"FILTER")),d.a.createElement("div",{className:"d-inline p-2"},d.a.createElement("input",{type:"text",value:this.state.searchString,className:"d-inline form-control form-control-sm search-field",onChange:function(t){e.filterData(t)}})))),d.a.createElement("div",{className:"centered-div"},d.a.createElement("div",{id:"subscriptionupgradeTableDiv"},this.state.showTableInit?this.state.newTableData.length>0?d.a.createElement("table",{id:"subscriptionupgradeTable",className:"table text-center"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"License ID"),d.a.createElement("th",null,"Email Address"),d.a.createElement("th",null,"Expiry Date"),d.a.createElement("th",null,"SSO"),d.a.createElement("th",null,"Actions"))),d.a.createElement("tbody",null,this.state.newTableData.map((function(t,a){return d.a.createElement("tr",{id:"subscriptionupgradeTableTbodyTr_"+a,key:"subscriptionupgradeTableTbodyTr_"+a},d.a.createElement("td",null,t.licenseId),d.a.createElement("td",null,t.emailAddress),d.a.createElement("td",null,t.date),d.a.createElement("td",null,t.sso),d.a.createElement("td",null,d.a.createElement("span",{className:"action-img"},e.props.permissions.accesses.maintain.subMenus.subscriptions.edit?d.a.createElement("img",{onClick:e.edit.bind(e,t),alt:"edit-icon",title:"Edit",src:b.a}):null,e.props.permissions.accesses.maintain.subMenus.subscriptions.delete?d.a.createElement("img",{alt:"delete-icon",onClick:e.deleteData.bind(e,t,a),title:"Delete",src:f.a}):null)))})))):d.a.createElement("div",{className:"row mt-2"},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("div",{className:"alert alert-success",role:"alert"},"No record found!"))):d.a.createElement("p",{className:"text-center loader-icon"},d.a.createElement("img",{alt:"loading",src:y.a})))))):d.a.createElement(p.a,{authToken:this.props.authToken,helpText:this.props.helpText,handleDataTable:this.handleDataTable.bind(this),baseUrl:this.props.baseUrl,userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage.bind(this),hideGlobalMessage:this.props.hideGlobalMessage.bind(this),changeView:this.changeView.bind(this),editItemData:this.state.editItemData,isViewOnly:!1}))}}]),a}(d.a.Component)}}]);
//# sourceMappingURL=4.249f4520.chunk.js.map