(this["webpackJsonpec-admin-webui"]=this["webpackJsonpec-admin-webui"]||[]).push([[9,21],{33:function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},34:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(33);function s(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r.a)(e,t):void 0}}},35:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(34);function s(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(r.a)(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o,n=!0,i=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return n=e.done,e},e:function(e){i=!0,o=e},f:function(){try{n||null==s.return||s.return()}finally{if(i)throw o}}}}},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(33);var s=a(34);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(s.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},38:function(e,t,a){e.exports=a.p+"static/media/icondelete_tablemaintainmonitor.ba23f6b1.svg"},39:function(e,t,a){e.exports=a.p+"static/media/iconedit_tablemaintainmonitor.f1791879.svg"},70:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));var r=a(7),s=a(36),o=a(35),n=a(2),i=a(3),l=a(5),u=a(4),c=a(0),p=a.n(c),d=a(1),m=a.n(d),b=a(39),h=a.n(b),g=a(38),f=a.n(g),v=a(6),y=a.n(v),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tableData:[],newTableData:[],selectedSubscriptionId:"",showTableInit:!1,subscriptions:[],filterValue:"",groupForm:{subscriptionId:{value:[],dirtyState:!1},groupId:{value:"",dirtyState:!1}},changeForm:!1,errorsGroupForm:{},groupFormIsValid:!1},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[],a=[];if(null!==sessionStorage.getItem("snapshotData")){var r=JSON.parse(sessionStorage.getItem("snapshotData")),s=[];Object.keys(r).forEach((function(e){s.push(r[e])}));for(var o=0,n=s;o<n.length;o++){var i=n[o];i.parent&&("f894e5a8-0f9b-46ca-8b74-57e94610d731"===i.parent&&a.push(i),"ab2a2691-a563-486c-9883-5111ff36ba9b"===i.parent&&t.push(i))}this.generateTableStructure(a),this.setState({tableData:a,subscriptions:t}),console.log(a),0===a.length&&(this.props.showGlobalMessage(!0,!0,"There is no Data","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3))}else this.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerForSubscriptionList),this.timerForSubscriptionList=null}},{key:"getSubscriptionList",value:function(){fetch(this.props.baseUrl+"/listSubscriptions",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status&&e.json().then((function(e){if("ok"===e.errorStatus.status){var t=e.data;localStorage.setItem("subscriptions",JSON.stringify(t))}else console.log("Subscription list backgroung api error")}))})).catch((function(e){console.log(e),console.log("Subscription list backgroung api error")}))}},{key:"initTable",value:function(e,t){var a;a=m()("#groupupgradeTableDiv")[0].offsetWidth-200,m()("#"+e).DataTable({dom:'rt<"bottom"lp>',bSort:!0,scrollX:!0,language:{paginate:{previous:"<",next:">"}},createdRow:function(e,t,r){for(var s=0;s<t.length;s++)m()("td:eq("+s+")",e).css("min-width",a/t.length+"px")},pageLength:5,stateSave:t,destroy:!0,fnDrawCallback:function(e){e.aiDisplay.length<=5?m()(".dataTables_paginate").hide():m()(".dataTables_paginate").show()}}),m()(".bottom").addClass("row"),m()(".dataTables_length").addClass("col-sm-6"),m()(".dataTables_paginate").addClass("col-sm-6")}},{key:"generateTableStructure",value:function(e){var t,a=this,r=[],s=Object(o.a)(e);try{for(s.s();!(t=s.n()).done;){var n=t.value,i={};i.groupId=n.groupId,i.subscriptionId=n.subscriptionId,i.key=n.key,r.push(i)}}catch(l){s.e(l)}finally{s.f()}this.setState({tableData:r,newTableData:r,showTableInit:!0}),setTimeout((function(){a.initTable("groupupgradeTable")}),100)}},{key:"destroyDataTable",value:function(e){m()("#"+e).DataTable().destroy()}},{key:"getDataOnChange",value:function(e){var t=this,a=e.target.value;this.destroyDataTable("groupupgradeTable"),this.setState({selectedSubscriptionId:a,showTableInit:!1}),""===a?(this.setState({tableData:[]}),this.generateTableStructure([])):fetch("https://reqres.in/api/users/2",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status?e.json().then((function(e){var r=e.data;if("ok"===(e={errorStatus:{status:"ok"}}).errorStatus.status){var n=JSON.parse(localStorage.getItem("newlyCreatedGroups"))||[],i=n.findIndex((function(e){return e.subscriptionId===a}));if(-1!==i){var l=Object(s.a)(n[i].createdData);if(l.length>0){var u,c=Object(o.a)(l);try{for(c.s();!(u=c.n()).done;){var p=u.value,d={groupId:p.groupId,ids:{aid:p.aid,tid:p.tid}};r.push(d)}}catch(m){c.e(m)}finally{c.f()}}}t.setState({tableData:r}),t.generateTableStructure(r)}else t.props.showGlobalMessage(!0,!0,e.errorStatus.statusMsg,"custom-danger"),setTimeout((function(){t.props.hideGlobalMessage()}),2e3)})):(t.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){t.props.hideGlobalMessage()}),2e3))})).catch((function(e){console.log(e),t.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){t.props.hideGlobalMessage()}),2e3)}))}},{key:"filterByValue",value:function(e,t){for(var a=[],r=0;r<e.length;r++)e[r].groupId.toLowerCase().includes(t.toLowerCase())&&a.push(e[r]);return a}},{key:"filterData",value:function(e){var t=this;this.destroyDataTable("groupupgradeTable");var a,r=e.target.value.trim(),n=Object(s.a)(this.state.tableData),i=[],l=Object(o.a)(n);try{for(l.s();!(a=l.n()).done;){var u=a.value,c={};void 0!==u.groupId&&(c.groupId=u.groupId,i.push(c))}}catch(d){l.e(d)}finally{l.f()}var p=[];p=""!==r?i.filter((function(e){return e.groupId.toLowerCase().includes(r.toLowerCase())})):i,this.setState({filterValue:r,newTableData:p}),setTimeout((function(){t.initTable("groupupgradeTable")}),0)}},{key:"removeDataTableRow",value:function(e,t){m()("#"+e).DataTable().row("#"+e+"TbodyTr_"+t).remove().draw(!1)}},{key:"deleteData",value:function(e,t){var a=this;window.confirm("Are you sure you want to delete")&&(this.props.showGlobalMessage(!0,!0,"Please Wait....","custom-success"),fetch(this.props.baseUrl+e.key,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){if(200===e.status)e.json().then((function(e){a.props.showGlobalMessage(!1,!0,"Record deleted successfuly","custom-success"),a.removeDataTableRow("groupupgradeTable",t);var r=a;setTimeout((function(){r.props.hideGlobalMessage()}),2e3)}));else{a.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger");var r=a;setTimeout((function(){r.props.hideGlobalMessage()}),2e3)}})).catch((function(e){console.log(e),a.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){a.props.hideGlobalMessage()}),2e3)})))}},{key:"editData",value:function(e){var t=this,a=Object(r.a)({},this.state.groupForm);a.groupId.value=e.groupId,a.subscriptionId.value=e.subscriptionId,this.setState({groupForm:a,currentKey:e.key}),setTimeout((function(){t.setState({changeForm:!0})})),setTimeout((function(){m()("select").selectpicker()}),500)}},{key:"updategroup",value:function(){var e=this;this.props.showGlobalMessage(!1,!0,"Record update initiated. Please check after some time.","custom-success");var t={};t.subscriptionId=this.state.groupForm.subscriptions.value,t.groupId=this.state.groupForm.groupId.value,t.parent="f894e5a8-0f9b-46ca-8b74-57e94610d731",t.name="GroupName",fetch(this.props.baseUrl+this.state.currentKey,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken},body:JSON.stringify(t)}).then((function(a){200===a.status?a.json().then((function(a){e.props.showGlobalMessage(!0,!0,a.errorStatus.statusMsg,"custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3);var r=JSON.parse(sessionStorage.getItem("newlyCreatedGroups")),o=r.findIndex((function(e){return e.subscriptionId===t.subscriptionId})),n=Object(s.a)(r[o].createdData),i=n.findIndex((function(e){return e.groupId===t.groupId}));n.splice(i,1),r[o].createdData=n,sessionStorage.setItem("newlyCreatedGroups",JSON.stringify(r))})):(e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3))})).catch((function(t){console.log(t),e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3)}))}},{key:"handleFormData",value:function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value,r=Object.assign({},this.state.groupForm);if("subscriptionId"===t){var s=Array.from(e.target.selectedOptions,(function(e){return e.value}));r.subscriptionId.value=s,r.subscriptionId.dirtyState=!0}else"groupId"===t&&(r.groupId.value=a,r.groupId.dirtyState=!0);this.setState({groupForm:r}),this.handleFormValidation()}},{key:"handleFormValidation",value:function(){var e,t=this.state.groupForm,a=t.subscriptionId.value,r=t.groupId.value,s=t.groupId.dirtyState,n=!0,i={},l=!1,u=Object(o.a)(a);try{for(u.s();!(e=u.n()).done;){""!==e.value.trim()&&(l=!0)}}catch(c){u.e(c)}finally{u.f()}l||(i.subscriptionId="Please select Subscription ID",n=!1),""===r.trim()&&(s&&(i.groupId="Please enter Group ID"),n=!1),this.setState({groupFormIsValid:n,errorsGroupForm:i})}},{key:"changeFormHandler",value:function(){var e=this;setTimeout((function(){e.setState({changeForm:!1,filterValue:""})}),0),this.generateTableStructure(this.state.tableData)}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,this.state.changeForm?p.a.createElement("div",{className:"row Groupupgrade"},p.a.createElement("div",{className:"col-md-12 centered-div"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-sm-6"},p.a.createElement("div",{className:"col-sm-12 label text-left"},"Group Id"),p.a.createElement("div",{className:"col-sm-12 mb-2"},p.a.createElement("input",{type:"text",className:"form-control form-control-sm",name:"groupId",onChange:function(t){e.handleFormData(t)},value:this.state.groupForm.groupId.value}),p.a.createElement("small",{className:"text-danger"},this.state.errorsGroupForm.groupId))),p.a.createElement("div",{className:"col-sm-6 text-center"},p.a.createElement("div",{className:"col-sm-12 label"},"Subscriptions"),p.a.createElement("select",{className:"selectpicker form-control form-control-sm ",multiple:!0,"data-live-search":"true",name:"subscriptionId",value:this.state.groupForm.subscriptionId.value,onChange:function(t){e.handleFormData(t)}},this.state.subscriptions.map((function(e,t){return p.a.createElement("option",{key:"subscriptionOption_"+t,value:e.licenseId},e.licenseId)}))),p.a.createElement("small",{className:"text-danger"},this.state.errorsGroupForm.subscriptionId))),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-sm-12 mb-2 text-center"},p.a.createElement("button",{id:"update-group-btn",disabled:!this.state.groupFormIsValid,onClick:this.updategroup.bind(this),className:"btn btn-sm customize-view-btn mr-2"},"UPDATE GROUP"),p.a.createElement("button",{onClick:function(){return e.changeFormHandler()},className:"btn btn-sm customize-view-btn"},"Back"))))):p.a.createElement("div",{className:"row Groupupgrade"},p.a.createElement("div",{className:"col-md-12"},p.a.createElement("div",{className:"row mt-2"},p.a.createElement("div",{className:"col-sm-6 text-left"},p.a.createElement("div",{className:"d-inline"},p.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary disabled"},p.a.createElement("i",{className:"fa fa-filter"}),"FILTER")),p.a.createElement("div",{className:"d-inline p-2"},p.a.createElement("input",{type:"text",className:"d-inline form-control form-control-sm search-field",onChange:function(t){e.filterData(t)},value:this.state.filterValue})))),p.a.createElement("div",{className:"row"}," ",null," "),p.a.createElement("div",{className:"centered-div"},p.a.createElement("div",{id:"groupupgradeTableDiv"},this.state.showTableInit?this.state.newTableData.length>0?p.a.createElement("table",{id:"groupupgradeTable",className:"table text-center"},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,"Group ID"),this.props.permissions.accesses.maintain.subMenus.groups.delete||this.props.permissions.accesses.maintain.subMenus.groups.edit?p.a.createElement("th",null,"Action"):null)),p.a.createElement("tbody",null,this.state.newTableData.map((function(t,a){return p.a.createElement("tr",{key:"groupupgradeTableTbodyTr_"+a,id:"groupupgradeTableTbodyTr_"+a},p.a.createElement("td",null,t.groupId),p.a.createElement("td",null,p.a.createElement("span",{className:"action-img"},e.props.permissions.accesses.maintain.subMenus.groups.edit?p.a.createElement("img",{alt:"delete-icon",onClick:e.editData.bind(e,t,a),title:"edit",src:h.a}):null,e.props.permissions.accesses.maintain.subMenus.groups.delete?p.a.createElement("img",{alt:"delete-icon",onClick:e.deleteData.bind(e,t,a),title:"Delete",src:f.a}):null)))})))):p.a.createElement("div",{className:"row mt-2"},p.a.createElement("div",{className:"col-md-12"},p.a.createElement("div",{className:"alert alert-success",role:"alert"},"No record found!"))):p.a.createElement("p",{className:"text-center loader-icon"},p.a.createElement("img",{alt:"loading",src:y.a})))))))}}]),a}(p.a.Component)}}]);
//# sourceMappingURL=9.27de4b8c.chunk.js.map