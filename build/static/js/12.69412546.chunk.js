(this["webpackJsonpec-admin-webui"]=this["webpackJsonpec-admin-webui"]||[]).push([[12,21],{33:function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,"a",(function(){return a}))},34:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(33);function o(e,t){if(e){if("string"===typeof e)return Object(a.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a.a)(e,t):void 0}}},35:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(34);function o(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(a.a)(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n,s=!0,i=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return s=e.done,e},e:function(e){i=!0,n=e},f:function(){try{s||null==o.return||o.return()}finally{if(i)throw n}}}}},36:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(33);var o=r(34);function n(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},37:function(e,t,r){e.exports=r.p+"static/media/icon_greensortingdown.7d91f50e.svg"},69:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return b}));var a=r(36),o=r(35),n=r(2),s=r(3),i=r(5),c=r(4),l=r(0),u=r.n(l),m=r(1),p=r.n(m),d=r(37),f=r.n(d),b=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).state={groupForm:{subscriptionId:{value:[],dirtyState:!1},groupId:{value:"",dirtyState:!1}},errorsGroupForm:{},groupFormIsValid:!1,subscriptions:[],keyName:""},a}return Object(s.a)(r,[{key:"enableToolTip",value:function(){setTimeout((function(){p()('[data-toggle="popover"]').popover()}),1e3)}},{key:"componentDidMount",value:function(){var e=this;if(this.enableToolTip(),this.props.showGlobalMessage(!0,!0,"Please wait...","custom-success"),null!==sessionStorage.getItem("snapshotData")){var t=JSON.parse(sessionStorage.getItem("snapshotData")),r=[],a=[],o=[];Object.keys(t).forEach((function(e){r.push(t[e])}));for(var n=0,s=r;n<s.length;n++){var i=s[n];i.parent&&("ab2a2691-a563-486c-9883-5111ff36ba9b"===i.parent&&a.push(i),"f894e5a8-0f9b-46ca-8b74-57e94610d731"===i.parent&&o.push(i))}if(this.setState({keyName:"Group["+o.length+"]"}),a.length>0){a[0].licenseId;var c=Object.assign({},this.state.groupForm);c.subscriptionId.value=[],this.setState({subscriptions:a,groupForm:c}),setTimeout((function(){console.log(e.state.subscriptions)}),2e3)}this.props.hideGlobalMessage(),localStorage.setItem("subscriptions",JSON.stringify(a))}else this.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3);setTimeout((function(){p()("select").selectpicker()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerForSubscriptionList),this.timerForSubscriptionList=null}},{key:"getSubscriptionList",value:function(){fetch(this.props.baseUrl+"/listSubscriptions",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status&&e.json().then((function(e){if("ok"==e.errorStatus.status){var t=e.data;localStorage.setItem("subscriptions",JSON.stringify(t))}else console.log("Subscription list backgroung api error")}))})).catch((function(e){console.log(e),console.log("Subscription list backgroung api error")}))}},{key:"handleFormData",value:function(e){var t=e.target.name,r="checkbox"===e.target.type?e.target.checked:e.target.value,a=Object.assign({},this.state.groupForm);if("subscriptionId"===t){var o=Array.from(e.target.selectedOptions,(function(e){return e.value}));a.subscriptionId.value=o,a.subscriptionId.dirtyState=!0}else"groupId"===t&&(a.groupId.value=r,a.groupId.dirtyState=!0);this.setState({groupForm:a}),this.handleFormValidation()}},{key:"handleFormValidation",value:function(){var e=this.state.groupForm,t=e.subscriptionId.value,r=e.subscriptionId.dirtyState,a=e.groupId.value,n=e.groupId.dirtyState,s=!0,i={};console.log(t);var c,l=!1,u=Object(o.a)(t);try{for(u.s();!(c=u.n()).done;){var m=c.value;console.log(m),""!==m.trim()&&(l=!0)}}catch(p){u.e(p)}finally{u.f()}l||(r&&(i.subscriptionId="Please select Subscription ID"),s=!1),""===a.trim()&&(n&&(i.groupId="Please enter Group ID"),s=!1),this.setState({groupFormIsValid:s,errorsGroupForm:i})}},{key:"createGroup",value:function(){var e=this;this.props.showGlobalMessage(!1,!0,"Record saving initiated. Please check after some time.","custom-success");var t=Object.assign({},this.state.groupForm),r={};r.subscriptionId=t.subscriptionId.value,r.groupId=t.groupId.value,r.parent="f894e5a8-0f9b-46ca-8b74-57e94610d731",r.name="GroupName";r.groupId;fetch(this.props.baseUrl+this.state.keyName,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken},body:JSON.stringify(r)}).then((function(t){200===t.status?t.json().then((function(t){e.props.showGlobalMessage(!0,!0,t.errorStatus.statusMsg,"custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3);var o=JSON.parse(sessionStorage.getItem("newlyCreatedGroups")),n=o.findIndex((function(e){return e.subscriptionId===r.subscriptionId})),s=Object(a.a)(o[n].createdData),i=s.findIndex((function(e){return e.groupId===r.groupId}));s.splice(i,1),o[n].createdData=s,sessionStorage.setItem("newlyCreatedGroups",JSON.stringify(o))})):(e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3))})).catch((function(t){console.log(t),e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3)}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"row Groupcreate"},u.a.createElement("div",{className:"col-md-12 mt-2"},u.a.createElement("div",{className:"centered-div"},u.a.createElement("div",{className:"centered-div-header"},u.a.createElement("div",{className:"row maintainagentcreate-header"},u.a.createElement("div",{className:"col-md-12"},u.a.createElement("h6",{id:"maintaingroupcreate-title"},"Create Group ",u.a.createElement("small",null,"Creating parameters.")))),u.a.createElement("hr",null),u.a.createElement("div",{className:"changeable-form group-form"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-6"},u.a.createElement("div",{className:"col-sm-12 label required"},"License ",u.a.createElement("img",{alt:"down-arrow",src:f.a})),u.a.createElement("div",{className:"col-sm-12 mb-2"},u.a.createElement("select",{className:"selectpickerform-control form-control-sm","data-live-search":"true",name:"subscriptionId",onChange:function(t){e.handleFormData(t)}},this.state.subscriptions.map((function(e,t){return u.a.createElement("option",{key:"subscriptionOption"+t,value:e.licenseId},e.licenseId)}))),u.a.createElement("small",{className:"text-danger"},this.state.errorsGroupForm.subscriptionId))),u.a.createElement("div",{className:"col-sm-6"},u.a.createElement("div",{className:"col-sm-12 label required"},"Group ID ",u.a.createElement("img",{alt:"down-arrow",src:f.a})),u.a.createElement("div",{className:"col-sm-12 mb-2"},u.a.createElement("input",{type:"text",className:"form-control form-control-sm",name:"groupId",value:this.state.groupForm.groupId.value,onChange:function(t){e.handleFormData(t)}}),u.a.createElement("small",{className:"text-danger"},this.state.errorsGroupForm.groupId)))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-12 mb-2 text-right"},u.a.createElement("button",{id:"create-group-btn",disabled:!this.state.groupFormIsValid,onClick:this.createGroup.bind(this),className:"btn btn-sm customize-view-btn"},"CREATE GROUP"))))))))}}]),r}(u.a.Component)}}]);
//# sourceMappingURL=12.69412546.chunk.js.map