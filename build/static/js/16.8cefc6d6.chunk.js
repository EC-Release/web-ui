(this["webpackJsonpec-admin-webui"]=this["webpackJsonpec-admin-webui"]||[]).push([[16],{41:function(e,t,a){e.exports=a.p+"static/media/icon_arrowmore.d49ae6a5.svg"},49:function(e,t,a){e.exports=a.p+"static/media/x_button.47259160.svg"},50:function(e,t,a){e.exports=a.p+"static/media/leftarrowbutton.8f0a6766.svg"},51:function(e,t,a){e.exports=a.p+"static/media/rightarrowbutton.597b923c.svg"},52:function(e,t,a){e.exports=a.p+"static/media/refresh.bcf2dbd4.svg"},91:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));var l=a(2),i=a(3),r=a(5),n=a(4),s=a(0),o=a.n(s),c=a(1),d=a.n(c),h=a(36),u=a(35),p=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){if(e.props.treeValue.length>0){var t=e.props.treeValue[0].id,a=document.getElementById("parentTreeNodeAnchor"+t);null!==a&&a.click()}}),2)}},{key:"componentDidUpdate",value:function(){}},{key:"handleGenerateTreeList",value:function(e,t){var a=this;return e.children?o.a.createElement("li",{key:e.id},o.a.createElement("a",{id:"parentTreeNodeAnchor"+e.id,onClick:this.props.changeTopology.bind(this,e),title:e.title,"data-toggle":"collapse","aria-expanded":"false",href:"#childTreeNodeAnchor"+e.id},"\xa0",e.value),o.a.createElement("ul",{id:"childTreeNodeAnchor"+e.id,className:"collapse"},e.children.map((function(e,t){return a.handleGenerateTreeList(e,t)})))):o.a.createElement("li",{title:e.title,key:e.id},e.value)}},{key:"render",value:function(){var e=this;return o.a.createElement("ul",{id:"treeList"},this.props.treeValue.length>0?this.props.treeValue.map((function(t,a){return e.handleGenerateTreeList(t,a)})):o.a.createElement("li",null,"No record"))}}]),a}(o.a.Component),m=a(47),v=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.generateTopology(this.props.nodeData)}},{key:"componentDidUpdate",value:function(){this.generateTopology(this.props.nodeData)}},{key:"generateTopology",value:function(e){new m.Network(this.refs.myRef,e,{height:"280px"}).moveTo({position:{x:0,y:0},offset:{x:-200,y:-140},scale:1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"Topologygraph",id:"topologygraph"},o.a.createElement("div",{ref:"myRef"}))}}]),a}(o.a.Component),f=a(48),b=a(41),g=a.n(b),y=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement("table",{className:"table "},o.a.createElement("thead",null,o.a.createElement("tr",null,this.props.tableData.thead.map((function(e,t){return o.a.createElement("th",{key:"viewTableThead_"+t},e.fieldName)})))),o.a.createElement("tbody",null,this.props.tableData.tbody.map((function(t,a){return o.a.createElement(o.a.Fragment,{key:"viewTableTbodyTr_"+a},o.a.createElement("tr",{"data-toggle":"collapse","data-target":"#collapseme"+a,role:"row",className:"parent-row"},e.props.tableData.thead.map((function(l,i){return o.a.createElement("td",{key:"viewTableTbodyTd_"+i},t[i].value," \xa0\xa0",t[i].hiddenValue&&""!==t[i].hiddenValue&&t[i].hiddenState?o.a.createElement("img",{onClick:e.props.showHideTableTdData.bind(e,a,i),className:"icon-arrowmore",alt:"td-detail",src:g.a}):null)}))),o.a.createElement("tr",{id:"collapseme"+a,className:"collapse out"},o.a.createElement("td",{colSpan:"8"},o.a.createElement("div",null,o.a.createElement(f.default,{userId:e.props.userId,showGlobalMessage:e.props.showGlobalMessage.bind(e),hideGlobalMessage:e.props.hideGlobalMessage.bind(e),tableindx:a,permissions:e.props.permissions})))))}))))}}]),a}(o.a.Component),w=a(10),E=a(49),F=a.n(E),I=a(50),S=a.n(I),N=a(51),T=a.n(N),k=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={allStateFields:[],availableFields:[],filteredAvailableFields:[],selectedFields:[],filteredSelectedFields:[],clickedFilteredAvailableFieldIndex:"",clickedFilteredSelectedFieldIndex:"",whereCondition:[],whereOperator:[],formDatas:[],finalFormDatas:[],isFormValid:!0,isDisableCreateViewButton:!1},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e,t=Object(h.a)(this.props.allFields),a=Object(h.a)(this.props.selectedFields),l=[{condition:"AND",label:"AND"},{condition:"OR",label:"OR"}],i=[{operator:"=",label:"="},{operator:">",label:">"},{operator:"<",label:"<"},{operator:"!=",label:"!="}],r=[{whereCondition:l[0].condition,whereField:t[0].fieldId,whereOperator:i[0].operator,whereValue:"",whereValueError:""}],n=t,s=Object(u.a)(a);try{var o=function(){var t=e.value;n=n.filter((function(e){return e.fieldId!==t.fieldId}))};for(s.s();!(e=s.n()).done;)o()}catch(c){s.e(c)}finally{s.f()}this.setState({allStateFields:t,availableFields:n,filteredAvailableFields:n,selectedFields:a,filteredSelectedFields:a,whereCondition:l,whereOperator:i,formDatas:r})}},{key:"handleAvailableFieldSelect",value:function(e){this.setState({clickedFilteredAvailableFieldIndex:e,clickedFilteredSelectedFieldIndex:""})}},{key:"handleSelectedFieldSelect",value:function(e){this.setState({clickedFilteredSelectedFieldIndex:e,clickedFilteredAvailableFieldIndex:""})}},{key:"filterBy",value:function(e,t){var a=t.toLowerCase();return function(e){return Object.keys(e).some((function(t){return-1!==e[t].toLowerCase().indexOf(a)}))}}},{key:"removeObject",value:function(e,t,a){for(var l=0;l<e.length;l++)e[l][t]===a&&e.splice(l,1);return e}},{key:"availableFieldsSerach",value:function(e){var t=e.target.value.trim(),a=[];""!==t?a=Object(h.a)(this.state.availableFields).filter(this.filterBy("fieldName",t)):a=Object(h.a)(this.state.availableFields);this.setState({filteredAvailableFields:a,clickedFilteredAvailableFieldIndex:""})}},{key:"handleMoveInSelected",value:function(){var e=this.state.clickedFilteredAvailableFieldIndex;if(""!==e){var t=Object(h.a)(this.state.availableFields),a=Object(h.a)(this.state.filteredAvailableFields),l=Object(h.a)(this.state.selectedFields),i=Object(h.a)(this.state.filteredSelectedFields),r=a[e],n=!1;a.splice(e,1),t=this.removeObject(t,"fieldId",r.fieldId),l.push(r),i.push(r),0===l.length&&(n=!0),this.setState({availableFields:t,filteredAvailableFields:a,selectedFields:l,filteredSelectedFields:i,clickedFilteredAvailableFieldIndex:"",isDisableCreateViewButton:n})}}},{key:"selectedFieldsSerach",value:function(e){var t=e.target.value.trim(),a=[];""!==t?a=Object(h.a)(this.state.selectedFields).filter(this.filterBy("fieldName",t)):a=Object(h.a)(this.state.selectedFields);this.setState({filteredSelectedFields:a,clickedFilteredSelectedFieldIndex:""})}},{key:"handleMoveInAvailable",value:function(){var e=this.state.clickedFilteredSelectedFieldIndex;if(""!==e){var t=Object(h.a)(this.state.selectedFields),a=Object(h.a)(this.state.filteredSelectedFields),l=Object(h.a)(this.state.availableFields),i=Object(h.a)(this.state.filteredAvailableFields),r=a[e],n=!1;a.splice(e,1),t=this.removeObject(t,"fieldId",r.fieldId),l.push(r),i.push(r),0===t.length&&(n=!0),this.setState({selectedFields:t,filteredSelectedFields:a,availableFields:l,filteredAvailableFields:i,clickedFilteredSelectedFieldIndex:"",isDisableCreateViewButton:n})}}},{key:"addNewFilter",value:function(){var e=this,t=Object(h.a)(this.state.formDatas),a={whereCondition:this.state.whereCondition[0].condition,whereField:this.state.allStateFields[0].fieldId,whereOperator:this.state.whereOperator[0].operator,whereValue:"",whereValueError:""};t.push(a),this.setState({formDatas:t}),setTimeout((function(){e.formValidation("inline")}),500)}},{key:"removeFormRow",value:function(e){var t=this,a=Object(h.a)(this.state.formDatas);a.splice(e,1),this.setState({formDatas:a}),setTimeout((function(){t.formValidation("inline")}),500)}},{key:"formValidation",value:function(e){var t=!0,a=Object(h.a)(this.state.formDatas);for(var l in a){""===a[l].whereValue.trim()&&("inline"!==e&&(a[l].whereValueError="Please enter value"),t=!1)}0===a.length&&(t=!1),this.setState({formDatas:a,isFormValid:t})}},{key:"changeFormValue",value:function(e,t){var a=e.target.name,l=e.target.value,i=Object(h.a)(this.state.formDatas);"whereValue"===a?(i[t].whereValue=l,l=l.trim(),i[t].whereValueError=""===l?"Please enter value":""):"whereCondition"===a?i[t].whereCondition=l:"whereField"===a?i[t].whereField=l:"whereOperator"===a&&(i[t].whereOperator=l),this.setState({formDatas:i}),this.formValidation("inline")}},{key:"applyFilter",value:function(){this.setState({finalFormDatas:Object(h.a)(this.state.formDatas)}),this.props.showGlobalMessage(!1,!0,"Filter applied successfully","custom-success");var e=this;setTimeout((function(){e.props.hideGlobalMessage(),e.props.createView(e.state.selectedFields,e.state.finalFormDatas)}),2e3)}},{key:"resetFilter",value:function(){var e=[{whereCondition:this.state.whereCondition[0].condition,whereField:this.state.allStateFields[0].fieldId,whereOperator:this.state.whereOperator[0].operator,whereValue:"",whereValueError:""}];this.setState({formDatas:e,finalFormDatas:[],isFormValid:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"Customsearch"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6 vdivide"},o.a.createElement("div",{className:"centered-div-header"},o.a.createElement("div",{className:"row view-header"},o.a.createElement("div",{className:"col-sm-8"},o.a.createElement("h6",null,"Search Criteria ",o.a.createElement("small",null,"Search parameters"))),o.a.createElement("div",{className:"col-sm-4"},"\xa0"))),o.a.createElement("hr",null),o.a.createElement("div",{className:"search-form"},this.state.formDatas.map((function(t,a){return o.a.createElement("div",{key:"form-row"+a},0!==a?o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("select",{onChange:function(t){e.changeFormValue(t,a)},className:"form-control",id:"whereCondition"+a,name:"whereCondition",value:t.whereCondition},e.state.whereCondition.map((function(e,t){return o.a.createElement("option",{key:"whereConditionOption"+a+t,value:e.condition},e.label)}))))):null,o.a.createElement("div",{className:"row mb-2"},o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("select",{onChange:function(t){e.changeFormValue(t,a)},value:t.whereField,className:"form-control",id:"whereField"+a,name:"whereField"},e.state.allStateFields.map((function(e,t){return o.a.createElement("option",{key:"whereFieldOption"+a+t,value:e.fieldId},e.fieldName)})))),o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("select",{onChange:function(t){e.changeFormValue(t,a)},value:t.whereOperator,className:"form-control",id:"whereOperator"+a,name:"whereOperator"},e.state.whereOperator.map((function(e,t){return o.a.createElement("option",{key:"whereOperatorOption"+a+t,value:e.operator},e.label)})))),o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("input",{onChange:function(t){e.changeFormValue(t,a)},value:t.whereValue,type:"text",className:"form-control",name:"whereValue",autoComplete:"off"}),o.a.createElement("small",{className:"text-danger"},""!==t.whereValueError?t.whereValueError:"")),o.a.createElement("div",{className:"col-sm-1"},o.a.createElement("img",{onClick:e.removeFormRow.bind(e,a),className:"remove-row",alt:"remove-row",src:F.a}))))})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("button",{onClick:this.addNewFilter.bind(this),className:"btn btn-sm float-left customize-view-btn"},"ADD FILTER"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("span",{className:"float-right"},o.a.createElement("button",{onClick:this.resetFilter.bind(this),className:"btn btn-sm customize-reset-btn ml-2"},"RESET")))))),o.a.createElement("div",{className:"col-sm-6 view-selection-panel"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-5"},o.a.createElement("h6",null,o.a.createElement("small",null,"AVAILABLE FIELDS")),o.a.createElement("div",{className:"pre-scrollable"},o.a.createElement("div",{className:"list-group"},o.a.createElement("input",{type:"text",onChange:function(t){e.availableFieldsSerach(t)},className:"form-control",placeholder:"Search"}),this.state.filteredAvailableFields.map((function(t,a){var l;return o.a.createElement("a",(l={href:"#",onClick:e.handleAvailableFieldSelect.bind(e,a),key:"availableFieldAnchorKey"+a},Object(w.a)(l,"href","#"),Object(w.a)(l,"className",e.state.clickedFilteredAvailableFieldIndex===a?"list-group-item list-group-item-action active":"list-group-item list-group-item-action"),l),t.fieldName)}))))),o.a.createElement("div",{className:"col-sm-2 selection-button-div"},o.a.createElement("img",{onClick:this.handleMoveInAvailable.bind(this),className:"mx-auto d-block",alt:"view-field-selection",src:S.a}),o.a.createElement("img",{onClick:this.handleMoveInSelected.bind(this),className:"mx-auto d-block",alt:"view-field-selection",src:T.a})),o.a.createElement("div",{className:"col-sm-5"},o.a.createElement("h6",null,o.a.createElement("small",null,"SELECTED FIELDS")),o.a.createElement("div",{className:"pre-scrollable"},o.a.createElement("div",{className:"list-group"},o.a.createElement("input",{type:"text",onChange:function(t){e.selectedFieldsSerach(t)},className:"form-control",placeholder:"Search"}),this.state.selectedFields.length>0?this.state.filteredSelectedFields.map((function(t,a){var l;return o.a.createElement("a",(l={href:"#",onClick:e.handleSelectedFieldSelect.bind(e,a),key:"selectedFieldAnchorKey"+a},Object(w.a)(l,"href","#"),Object(w.a)(l,"className",e.state.clickedFilteredSelectedFieldIndex===a?"list-group-item list-group-item-action active":"list-group-item list-group-item-action"),l),t.fieldName)})):o.a.createElement("li",{className:"list-group-item list-group-item-danger"},"Please select fields"))))))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("button",{disabled:!(this.state.isFormValid&&!this.state.isDisableCreateViewButton),onClick:this.applyFilter.bind(this),className:"btn btn-sm customize-view-btn"},"CREATE VIEW"))))}}]),a}(o.a.Component),C=a(52),O=a.n(C),j=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={treeValue:[],graph:{nodes:[],edges:[]},loadTreeJs:!1,centerNodeColor:"#ff0000",nodeShapes:["ellipse","circle","box"],apiLoadPercentage:0,mockTableData:[],table:{thead:[],tbody:[]},allFields:[],isSearchView:!1},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[{id:1,value:"group-101",color:"#57F518",children:[{id:2,value:"Gateway-104",color:"#8FF4FF",children:[{id:3,value:"Wabtec-gecars-qa client",color:"#C98FFF",edgeLabel:"Group 101"},{id:4,value:" Wabtec-gecars-qa server",color:"#C98FFF",edgeLabel:"Group 101"},{id:5,value:"wabtec-gecars-ta client",color:"#45C7FF",edgeLabel:"Group 101"},{id:6,value:"wabtec-gecars-ta server",color:"#45C7FF",edgeLabel:"Group 101"}]},{id:7,value:"Gateway-101",color:"#8FF4FF",children:[{id:8,value:"wabtec-gecorp-qa client",color:"#C98FFF",edgeLabel:"Group 101"},{id:9,value:"wabtec-gecorp-qa server",color:"#C98FFF",edgeLabel:"Group 101"},{id:10,value:"wabtec-gecorp-dev client",color:"#45C7FF",edgeLabel:"Group 101"},{id:11,value:"wabtec-gecorp-dev server",color:"#45C7FF",edgeLabel:"Group 101"}]}]},{id:12,value:"group-102",x:200,y:100,children:[{id:13,value:"Gateway-102",children:[{id:14,value:"Client-01",color:"#C98FFF",edgeLabel:"Group 102"},{id:15,value:"Server-01",color:"#C98FFF",edgeLabel:"Group 102"},{id:16,value:"Client-02",color:"#45C7FF",edgeLabel:"Group 102"},{id:17,value:"Server-02",color:"#45C7FF",edgeLabel:"Group 102"}]},{id:21,value:"Gateway-103",children:[{id:22,value:"Client-01",color:"#C98FFF",edgeLabel:"Group 102"},{id:23,value:"Server-01",color:"#C98FFF",edgeLabel:"Group 102"}]}]}];if(sessionStorage.setItem("graphData",JSON.stringify(t)),null===localStorage.getItem("treeValue")||null===localStorage.getItem("technicalTableData")){var a=[],l=0;fetch(this.props.baseUrl+"/snapshot",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(i){200===i.status&&i.json().then((function(i){if("ok"===(i={errorStatus:{status:"ok"},data:[{listdata:[{groupName:"wabtec-gecars-qa",items:[{groupId:"wabtec-gecars-qa",sessionId:"0idLmsMk8e"},{groupId:"wabtec-gecars-qa",sessionId:"0idLmsMk8t"}]},{groupName:"wabtec-gecars-ba",items:[{groupId:"wabtec-gecars-ba",sessionId:"0idLmsMk8e"},{groupId:"wabtec-gecars-ba",sessionId:"0idLmsMk8f"}]}]}]}).errorStatus.status){var r=i.data;if(null!==r)!function(){t[0].value=t[0].value+" ("+r.length+")",0===r.length&&(r=[]);var i=r.length,n=r.length,s=0;if(0===i){var o=e;setTimeout((function(){o.setState({loadTreeJs:!0}),console.log("subscriptions")}),1e3)}l=Math.round(s/n*100),e.setState({apiLoadPercentage:l});var c=t[0].id,d=function(i){var o=r[i].listdata[i].items[i].groupId,d=r[i].listdata[i].items[i].groupId;c++;var h={};h.id=c,h.title=d;var u=d;d.length>20&&(u=d.substr(0,5)+"..."+d.substr(d.length-5,5));h.value=u,h.nodeType="subscription",0===i?t[0].children=[h]:t[0].children.push(h),""!==o?fetch("https://reqres.in/api/users/2",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.props.authToken}}).then((function(r){200===r.status&&(s++,l=Math.round(s/n*100),e.setState({apiLoadPercentage:l}),r.json().then((function(r){if("ok"===(r={errorStatus:{status:"ok"},data:{glist:[{suidbscriptionId:2323,subscrititleptionName:"abc",cfURL:"https://reqres.in/api/users/2",children:""},{id:6754,title:"uytut",cfURL:"https://reqres.in/api/users/2",children:""}]}}).errorStatus.status){var o=r.data.glist,h=Object.keys(o).length;n+=h,l=Math.round(s/n*100),e.setState({apiLoadPercentage:l}),t[0].children[i].value=t[0].children[i].value+" ("+h+")";var u=function(r){c++;var h={};h.id=c,h.title=o[r].cfURL;var u=o[r].cfURL,p=u.indexOf("://")+3,m=u.indexOf("."),v=u.slice(p,m),f=v;if(v>30){var b=v.substr(0,10),g=v.substr(v.length-10,10);v=b+"..."+g}h.value=v,h.nodeType="gateway",0===r.split(":")[1]&&(t[0].children[i].children=[h]),fetch("https://reqres.in/api/users/2",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.props.authToken}}).then((function(o){200===o.status&&o.json().then((function(o){if(o={errorStatus:{status:"ok"},data:{SuperConns:{serverId:23},ClientPool:[{bindId:3432}],Sessions:[{clientConfig:{groupId:53435}}]}},s++,l=Math.round(s/n*100),e.setState({apiLoadPercentage:l}),"ok"===o.errorStatus.status){var h=o.data.ClientPool,u=[],p={},m=o.data.SuperConns,v=[],b={},g=o.data.Sessions,y=[],w=[],E={};for(var F in g){var I={};I.sessionId=F,I.groupId=g[F].clientConfig.groupId,y.push(I)}if(h.length>0&&(h.forEach((function(e){p[e.bindId]=(p[e.bindId]||0)+1})),u=e.removeDuplicates(h,"bindId")),u.length>0)for(var S in c++,u){c++;var N={};N.id=c;var T=[{clientConfig:{groupId:2424,id:121}}];N.title=T[S].clientConfig.groupId+"\n ["+T[S].clientConfig.id+"] ("+p[T[S].clientConfig.id]+")";var k=T[S].clientConfig.groupId+"\n ["+T[S].clientConfig.id+"] ("+p[T[S].clientConfig.id]+")";N.value=k,N.nodeType="clientpool";var C={};C.subscription_name=d,C.gateway=f,C.group_id=T[S].clientConfig.groupId,C.count=p[T[S].clientConfig.id],C.type="clientpool",a.push(C)}if(m.length>0&&(m.forEach((function(e){b[e.serverId]=(b[e.serverId]||0)+1})),v=e.removeDuplicates(m,"serverId")),v.length>0){for(var O in c++,t[0].children[i].children[r.split(":")[1]].children?t[0].children[i].children[r.split(":")[1]].children.push({id:c,value:"Super Connections ("+m.length+")",title:"Super Connections",nodeType:"superconnectiontitle"}):t[0].children[i].children[r.split(":")[1]].children=[{id:c,value:"Super Connections ("+m.length+")",title:"Super Connections",nodeType:"superconnectiontitle"}],v){c++;var j={};j.id=c,j.title=v[O].bindId.groupId+"\n ["+v[O].bindId.id+"] ("+b[v[O].bindId.id]+")";var V=v[O].bindId.groupId+"\n ["+v[O].bindId.id+"] ("+b[v[O].bindId.id]+")";j.value=V,j.nodeType="superconnection",0===O?"Client Pools"===t[0].children[i].children[r.split(":")[1]].children[0].title?t[0].children[i].children[r.split(":")[1]].children[1].children=[j]:t[0].children[i].children[r.split(":")[1]].children[0].children=[j]:"Client Pools"===t[0].children[i].children[r.split(":")[1]].children[0].title?t[0].children[i].children[r.split(":")[1]].children[1].children.push(j):t[0].children[i].children[r.split(":")[1]].children[0].children.push(j);var D={};D.subscription_name=d,D.gateway=f,D.group_id=v[O].bindId.groupId,D.count=b[v[O].bindId.id],D.type="superconnection",a.push(D)}if(y.length>0&&(y.forEach((function(e){E[e.groupId]=(E[e.groupId]||0)+1})),w=e.removeDuplicates(y,"groupId")),w.length>0){c++,t[0].children[i].children[r.split(":")[1]].children?t[0].children[i].children[r.split(":")[1]].children.push({id:c,value:"Sessions ("+y.length+")",title:"Sessions",nodeType:"sessiontitle"}):t[0].children[i].children[r.split(":")[1]].children=[{id:c,value:"Sessions ("+y.length+")",title:"Sessions",nodeType:"sessiontitle"}];var L=t[0].children[i].children[r.split(":")[1]].children.length-1;for(var G in w){c++;var x={};x.id=c,x.title=w[G].groupId+"("+E[w[G].groupId]+")";var A=w[G].groupId+"("+E[w[G].groupId]+")";x.value=A,x.nodeType="session",0===G?t[0].children[i].children[r.split(":")[1]].children[L].children=[x]:t[0].children[i].children[r.split(":")[1]].children[L].children.push(x);var M={};M.subscription_name=d,M.gateway=f,M.group_id=w[G].groupId,M.count=E[w[G].groupId],M.type="session",a.push(M)}}}}if(s===n){e.generateTableStructure(a),localStorage.setItem("technicalTableData",JSON.stringify(a)),localStorage.setItem("treeValue",JSON.stringify(t));var P=e;setTimeout((function(){P.setState({mockTableData:a,loadTreeJs:!0})}),2e3)}}))}))};for(var p in o)u(p)}else t[0].children[i].value=t[0].children[i].value+" (0)";if(s===n){var m=e;setTimeout((function(){m.setState({loadTreeJs:!0}),console.log("gateways")}),2e3)}})))})):(s++,l=Math.round(s/n*100),e.setState({apiLoadPercentage:l}))};for(var h in r)d(h);var p=[],m=[];if(t.length>0){var v=t[0];console.log(t[0]);var f={id:v.id,label:v.value,title:v.value,color:v.color,shape:"ellipse"};if(p.push(f),v.children){var b,g=Object(u.a)(v.children);try{for(g.s();!(b=g.n()).done;){var y=b.value,w=y.id,E=y.value,F=y.title,I=y.color,S=y.edgeLabel,N="box";"subscription"===y.nodeType||"superconnectiontitle"===y.nodeType||"clientpooltitle"===y.nodeType||"sessiontitle"===y.nodeType?N="circle":"clientpool"===y.nodeType&&(N="ellipse");var T={id:w,label:E,title:F,shape:N,color:I};p.push(T);var k={from:1,to:w,label:S,color:I};m.push(k)}}catch(C){g.e(C)}finally{g.f()}}}e.setState({treeValue:t,graph:{nodes:p,edges:m}})}();else{e.setState({table:{thead:[{fieldId:"subscription_name",fieldName:"Subscription Name"},{fieldId:"gateway",fieldName:"Gateway"},{fieldId:"group_id",fieldName:"Group Id"},{fieldId:"count",fieldName:"Count"},{fieldId:"type",fieldName:"Type"}],tbody:[]},allFields:[]}),setTimeout((function(){e.setState({treeValue:[],graph:{nodes:[],edges:[]},apiLoadPercentage:100,loadTreeJs:!0})}),2e3)}}}))}))}else this.displayDataFromLocalStorage()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"displayDataFromLocalStorage",value:function(){var e=this,t=[],a=[],l=JSON.parse(sessionStorage.getItem("graphData")),i=JSON.parse(localStorage.getItem("technicalTableData"));if(this.setState({mockTableData:i}),this.generateTableStructure(i),l.length>0){var r=l[0];console.log(r);var n={id:r.id,label:r.value,title:r.value,color:r.color,shape:"ellipse"};if(t.push(n),r.children){var s,o=Object(u.a)(r.children);try{for(o.s();!(s=o.n()).done;){var c=s.value,d=c.id,h=c.value,p=c.title,m=c.color,v=c.edgeLabel,f="box";"subscription"===c.nodeType||"superconnectiontitle"===c.nodeType||"clientpooltitle"===c.nodeType||"sessiontitle"===c.nodeType?f="circle":"clientpool"===c.nodeType&&(f="ellipse");var b={id:d,label:h,title:p,shape:f,color:m};t.push(b);var g={from:1,to:d,label:v,color:m};a.push(g)}}catch(y){o.e(y)}finally{o.f()}}}this.setState({treeValue:l,graph:{nodes:t,edges:a},apiLoadPercentage:99}),setTimeout((function(){e.setState({apiLoadPercentage:100,loadTreeJs:!0}),console.log("from LS")}),1e3)}},{key:"getItems",value:function(){var e=this,t=[],a=[{id:1,value:"EC",title:"EC",nodeType:"root"}];fetch(this.props.baseUrl+"/listSubscriptions",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(l){200===l.status&&l.json().then((function(l){if("ok"===l.errorStatus.status){var i=l.data;null!==i&&function(){a[0].value=a[0].value+" ("+i.length+")",0===i.length&&(i=[]);var l=i.length,r=i.length,n=0;0===l&&(localStorage.setItem("technicalTableData",JSON.stringify(t)),localStorage.setItem("treeValue",JSON.stringify(a)),e.setState({mockTableData:t}));var s=a[0].id,o=function(l){var o=i[l].subscriptionId.trim(),c=i[l].subscriptionName.trim();s++;var d={};d.id=s,d.title=c;var h=c;c.length>20&&(h=c.substr(0,5)+"..."+c.substr(c.length-5,5));d.value=h,d.nodeType="subscription",0===l?a[0].children=[d]:a[0].children.push(d),""!==o?fetch(e.props.baseUrl+"/gatewayList?subscriptionID="+o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.props.authToken}}).then((function(i){200===i.status&&(n++,i.json().then((function(i){if("ok"===i.errorStatus.status){var o=i.data.glist,d=Object.keys(o).length;r+=d,a[0].children[l].value=a[0].children[l].value+" ("+d+")";var h=function(i){s++;var d={};d.id=s,d.title=o[i].cfURL;var h=o[i].cfURL,u=h.indexOf("://")+3,p=h.indexOf("."),m=h.slice(u,p),v=m;if(m>30){var f=m.substr(0,10),b=m.substr(m.length-10,10);m=f+"..."+b}d.value=m,d.nodeType="gateway",0===i.split(":")[1]?a[0].children[l].children=[d]:a[0].children[l].children.push(d),fetch(e.props.baseUrl+"/getGatewayHealth?gatewayURL="+o[i].cfURL,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.props.authToken}}).then((function(o){200===o.status&&o.json().then((function(o){if(n++,"ok"===o.errorStatus.status){var d=o.data.ClientPool,h=[],u={},p=o.data.SuperConns,m=[],f={},b=o.data.Sessions,g=[],y=[],w={};for(var E in b){var F={};F.sessionId=E,F.groupId=b[E].clientConfig.groupId,g.push(F)}if(d.length>0&&(d.forEach((function(e){u[e.bindId]=(u[e.bindId]||0)+1})),h=e.removeDuplicates(d,"bindId")),h.length>0)for(var I in s++,a[0].children[l].children[i.split(":")[1]].children=[{id:s,value:"Client Pools ("+d.length+")",title:"Client Pools",nodeType:"clientpooltitle"}],h){s++;var S={};S.id=s,S.title=h[I].clientConfig.groupId+"\n ["+h[I].clientConfig.id+"] ("+u[h[I].clientConfig.id]+")";var N=h[I].clientConfig.groupId+"\n ["+h[I].clientConfig.id+"] ("+u[h[I].clientConfig.id]+")";S.value=N,S.nodeType="clientpool",0===I?a[0].children[l].children[i.split(":")[1]].children[0].children=[S]:a[0].children[l].children[i.split(":")[1]].children[0].children.push(S);var T={};T.subscription_name=c,T.gateway=v,T.group_id=h[I].clientConfig.groupId,T.count=u[h[I].clientConfig.id],T.type="clientpool",t.push(T)}if(p.length>0&&(p.forEach((function(e){f[e.serverId]=(f[e.serverId]||0)+1})),m=e.removeDuplicates(p,"serverId")),m.length>0){for(var k in s++,a[0].children[l].children[i.split(":")[1]].children?a[0].children[l].children[i.split(":")[1]].children.push({id:s,value:"Super Connections ("+p.length+")",title:"Super Connections",nodeType:"superconnectiontitle"}):a[0].children[l].children[i.split(":")[1]].children=[{id:s,value:"Super Connections ("+p.length+")",title:"Super Connections",nodeType:"superconnectiontitle"}],m){s++;var C={};C.id=s,C.title=m[k].bindId.groupId+"\n ["+m[k].bindId.id+"] ("+f[m[k].bindId.id]+")";var O=m[k].bindId.groupId+"\n ["+m[k].bindId.id+"] ("+f[m[k].bindId.id]+")";C.value=O,C.nodeType="superconnection",0===k?"Client Pools"===a[0].children[l].children[i.split(":")[1]].children[0].title?a[0].children[l].children[i.split(":")[1]].children[1].children=[C]:a[0].children[l].children[i.split(":")[1]].children[0].children=[C]:"Client Pools"===a[0].children[l].children[i.split(":")[1]].children[0].title?a[0].children[l].children[i.split(":")[1]].children[1].children.push(C):a[0].children[l].children[i.split(":")[1]].children[0].children.push(C);var j={};j.subscription_name=c,j.gateway=v,j.group_id=m[k].bindId.groupId,j.count=f[m[k].bindId.id],j.type="superconnection",t.push(j)}if(g.length>0&&(g.forEach((function(e){w[e.groupId]=(w[e.groupId]||0)+1})),y=e.removeDuplicates(g,"groupId")),y.length>0){s++,a[0].children[l].children[i.split(":")[1]].children?a[0].children[l].children[i.split(":")[1]].children.push({id:s,value:"Sessions ("+g.length+")",title:"Sessions",nodeType:"sessiontitle"}):a[0].children[l].children[i.split(":")[1]].children=[{id:s,value:"Sessions ("+g.length+")",title:"Sessions",nodeType:"sessiontitle"}];var V=a[0].children[l].children[i.split(":")[1]].children.length-1;for(var D in y){s++;var L={};L.id=s,L.title=y[D].groupId+"("+w[y[D].groupId]+")";var G=y[D].groupId+"("+w[y[D].groupId]+")";L.value=G,L.nodeType="session",0===D?a[0].children[l].children[i.split(":")[1]].children[V].children=[L]:a[0].children[l].children[i.split(":")[1]].children[V].children.push(L);var x={};x.subscription_name=c,x.gateway=v,x.group_id=y[D].groupId,x.count=w[y[D].groupId],x.type="session",t.push(x)}}}}n===r&&(localStorage.setItem("technicalTableData",JSON.stringify(t)),localStorage.setItem("treeValue",JSON.stringify(a)),e.setState({mockTableData:t}),console.log("Long Poll data GL"))}))}))};for(var u in o)h(u)}else a[0].children[l].value=a[0].children[l].value+" (0)";n===r&&(localStorage.setItem("technicalTableData",JSON.stringify(t)),localStorage.setItem("treeValue",JSON.stringify(a)),e.setState({mockTableData:t}),console.log("Long Poll data GL NF"))})))})):n++};for(var c in i)o(c)}()}}))}))}},{key:"generateTableStructure",value:function(e){var t=[],a=[],l=[],i=[{gatewayId:"0idLmsMk8e",RefID:"101186260",IP:"10.72.11.10:63218",sessionId:"0idLmsMk8e",groupId:"wabtec-gecars-qa",bindid:"XvmV6ynici",targetId:"Q7rfHI",timeCreated:"2021-02-10T12:11:07.223278039Z",serviceUrl:"https://b3a2e606-eaa8-4d3c-aadc-c27f12260a1b.run.aws-usw02-dev.ice.predix.io"},{gatewayId:"1idLmsBc9x",RefID:"132186260",IP:"10.72.11.10:63317",sessionId:"1idLmsBc9x",groupId:"wabtec-gecars-ta",bindid:"ZcdV6snbci",targetId:"Q7rfHI",timeCreated:"2021-02-10T12:11:07.223278039Z",serviceUrl:"https://b3a2e606-eaa8-4d3c-aadc-c27f12260a1b.run.aws-usw02-dev.ice.predix.io"}],r=i;if(sessionStorage.setItem("gatewayDetails",JSON.stringify(i)),r.length>0){for(var n=Object.keys(r[0]),s=0,o=n;s<o.length;s++){var c=o[s],d={};d.fieldId=c,d.fieldName=this.toTableHeaderCase(c),t.push(d),a.push(d)}var h,p=Object(u.a)(r);try{for(p.s();!(h=p.n()).done;){var m,v=h.value,f={},b=0,g=Object(u.a)(n);try{for(g.s();!(m=g.n()).done;){var y=m.value,w={};v[y].length>10?(w.value=v[y].substr(0,10),w.hiddenValue=v[y],w.hiddenState=!0):w.value=v[y],f[b]=w,b++}}catch(E){g.e(E)}finally{g.f()}l.push(f)}}catch(E){p.e(E)}finally{p.f()}}this.setState({table:{thead:t,tbody:l},allFields:a})}},{key:"toTableHeaderCase",value:function(e){return e.split("_").map((function(e,t){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ")}},{key:"showHideTableTdData",value:function(e,t){var a=this.state.table.tbody,l=Object.assign({},a[e][t]),i=l.value;l.value=l.hiddenValue,l.hiddenValue=i,l.hiddenState=!l.hiddenState,a[e][t]=l,this.setState({table:{thead:this.state.table.thead,tbody:a}})}},{key:"changeToSearchView",value:function(){this.setState({isSearchView:!0})}},{key:"changeTopologyView",value:function(e){var t=[],a=[],l=Object.assign({},e),i=l.id,r=l.value,n=l.title,s=l.color,o={};if(o.id=i,o.label=r,o.title=n,o.color=s,o.shape="ellipse",o.color=s,t.push(o),l.children){var c,d=Object(h.a)(l.children),p=Object(u.a)(d);try{for(p.s();!(c=p.n()).done;){var m=c.value,v=Object.assign({},m),f=v.id,b=v.value,g=v.title,y=v.nodeType,w=v.color,E=m.edgeLabel,F={};F.id=f,F.label=b,F.title=g;var I="box";"subscription"===y||"superconnectiontitle"===y||"clientpooltitle"===y||"sessiontitle"===y?(I="circle",s="#08cc9efa"):"clientpool"===y?(I="ellipse",s="#e84a4a"):"session"===y&&(I="box",s="#ffc107"),F.shape=I,F.color=w,t.push(F);var S={};S.from=i,S.to=f,S.label=E,S.color=w,a.push(S)}}catch(N){p.e(N)}finally{p.f()}}this.setState({graph:{nodes:t,edges:a}})}},{key:"removeDuplicates",value:function(e,t){return e.filter((function(e,a,l){return l.map((function(e){return e[t]})).indexOf(e[t])===a}))}},{key:"destroyDataTable",value:function(e){d()("#"+e).DataTable().destroy()}},{key:"refreshData",value:function(e){var t=this;if(this.destroyDataTable("viewTable"),this.setState({loadTreeJs:!1,apiLoadPercentage:70}),null!==localStorage.getItem("treeValue")&&null!==localStorage.getItem("technicalTableData"))this.displayDataFromLocalStorage();else{this.setState({table:{thead:[{fieldId:"subscription_name",fieldName:"Subscription Name"},{fieldId:"gateway",fieldName:"Gateway"},{fieldId:"group_id",fieldName:"Group Id"},{fieldId:"count",fieldName:"Count"},{fieldId:"type",fieldName:"Type"}],tbody:[]},allFields:[]}),setTimeout((function(){t.setState({treeValue:[],graph:{nodes:[],edges:[]},apiLoadPercentage:100,loadTreeJs:!0})}),2e3)}}},{key:"createView",value:function(e,t){var a=this,l=Object(h.a)(this.state.mockTableData);console.log(l);var i,r=l,n=[],s=[],o=Object(u.a)(t);try{for(o.s();!(i=o.n()).done;){var c=i.value;"AND"===c.whereCondition&&""!==c.whereValue?n.push(c):"OR"===c.whereCondition&&""!==c.whereValue&&s.push(c)}}catch(M){o.e(M)}finally{o.f()}if(n.length>0){var d,p=Object(u.a)(n);try{var m=function(){var e=d.value;"="===e.whereOperator?r=r.filter((function(t){return t[e.whereField]===e.whereValue})):">"===e.whereOperator?r=r.filter((function(t){return t[e.whereField]>e.whereValue})):"<"===e.whereOperator?r=r.filter((function(t){return t[e.whereField]<e.whereValue})):"!="===e.whereOperator&&(r=r.filter((function(t){return t[e.whereField]!==e.whereValue})))};for(p.s();!(d=p.n()).done;)m()}catch(M){p.e(M)}finally{p.f()}}if(s.length>0){var v,f=[],b=Object(u.a)(s);try{var g=function(){var e=v.value,t=[],l=Object(h.a)(a.state.mockTableData);if("="===e.whereOperator?t=l.filter((function(t){return t[e.whereField]===e.whereValue})):">"===e.whereOperator?t=l.filter((function(t){return t[e.whereField]>e.whereValue})):"<"===e.whereOperator?t=l.filter((function(t){return t[e.whereField]<e.whereValue})):"!="===e.whereOperator&&(t=l.filter((function(t){return t[e.whereField]!==e.whereValue}))),t.length>0){var i,r=Object(u.a)(t);try{for(r.s();!(i=r.n()).done;){var n=i.value;f.push(n)}}catch(M){r.e(M)}finally{r.f()}}};for(b.s();!(v=b.n()).done;)g()}catch(M){b.e(M)}finally{b.f()}if(f.length>0){var y,w=Object(u.a)(f);try{for(w.s();!(y=w.n()).done;){var E=y.value;r.push(E)}}catch(M){w.e(M)}finally{w.f()}}}if(s.length>0){var F=Object.create(null);uniqueFilteredData=r.filter((function(e){var t=["subscription_name","group_id","gateway"].map((function(t){return e[t]})).join("|");if(!F[t])return F[t]=!0,!0}))}else uniqueFilteredData=r;var I,S=[],N=[],T=Object(u.a)(e);try{for(T.s();!(I=T.n()).done;){var k=I.value;S.push(k.fieldId)}}catch(M){T.e(M)}finally{T.f()}var C,O=Object(u.a)(r);try{for(O.s();!(C=O.n()).done;){var j,V=C.value,D={},L=0,G=Object(u.a)(S);try{for(G.s();!(j=G.n()).done;){var x=j.value,A={};V[x].length>10?(A.value=V[x].substr(0,10),A.hiddenValue=V[x],A.hiddenState=!0):A.value=V[x],D[L]=A,L++}}catch(M){G.e(M)}finally{G.f()}N.push(D)}}catch(M){O.e(M)}finally{O.f()}this.setState({table:{thead:e,tbody:N},isSearchView:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.state.isSearchView?o.a.createElement(k,{showGlobalMessage:this.props.showGlobalMessage.bind(this),hideGlobalMessage:this.props.hideGlobalMessage.bind(this),allFields:this.state.allFields,selectedFields:this.state.table.thead,createView:this.createView.bind(this)}):o.a.createElement("div",{className:"Technicalview"},o.a.createElement("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link active",id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true"},"Table")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link",id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false"},"Treelist and Topology")),o.a.createElement("li",{title:"Refresh",className:"nav-item cursor-pointer",onClick:function(t){e.refreshData(t)}},o.a.createElement("a",{className:"nav-link disabled",href:"#"},o.a.createElement("img",{className:"",src:O.a,alt:"refresh",height:"15px"})))),o.a.createElement("div",{className:"tab-content",id:"myTabContent"},o.a.createElement("div",{className:"tab-pane fade show active",id:"home",role:"tabpanel","aria-labelledby":"home-tab"},this.state.loadTreeJs?this.state.table.tbody.length>0?o.a.createElement("div",{className:"row view-table"},o.a.createElement("div",{className:"col-md-12",id:"viewTableDiv"},o.a.createElement("button",{onClick:this.changeToSearchView.bind(this),className:"btn btn-sm float-right btn-link"},"Advanced search"),o.a.createElement(y,{tableData:this.state.table,showHideTableTdData:this.showHideTableTdData.bind(this),userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage.bind(this),hideGlobalMessage:this.props.hideGlobalMessage.bind(this),permissions:this.props.permissions}))):o.a.createElement("div",{className:"row mt-2"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"alert alert-success",role:"alert"},"No record found!"))):o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12 mt-5"},o.a.createElement("p",null,"Please wait..."),o.a.createElement("div",{className:"progress"},o.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:this.state.apiLoadPercentage+"%"}}))))),o.a.createElement("div",{className:"tab-pane fade",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"},this.state.loadTreeJs?this.state.graph.nodes.length>0&&this.state.treeValue.length>0?o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-4 treeview-div"},o.a.createElement(p,{treeValue:this.state.treeValue,changeTopology:this.changeTopologyView.bind(this)})),o.a.createElement("div",{className:"col-md-8 treeview-div"},o.a.createElement(v,{nodeData:this.state.graph}))):o.a.createElement("div",{className:"row mt-2"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"alert alert-success",role:"alert"},"No record found!"))):o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12 mt-5"},o.a.createElement("p",null,"Please wait..."),o.a.createElement("div",{className:"progress"},o.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:this.state.apiLoadPercentage+"%"}}))))))))}}]),a}(o.a.Component),V=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={treeValue:[],graph:{nodes:[],edges:[]},options:{layout:{hierarchical:!0},edges:{color:"#000000"},height:"500px"},table:{thead:[],tbody:[]}},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=[{id:1,value:"EC",children:[{id:2,value:"Business",children:[{id:7,value:"Aviation",children:[{id:11,value:"Aviation1"},{id:12,value:"Aviation2"},{id:13,value:"Aviation3"}]},{id:8,value:"Power"},{id:9,value:"Capital"},{id:10,value:"External"}]},{id:3,value:"Subscription"},{id:4,value:"Application"},{id:5,value:"Groups"},{id:6,value:"Connection"}]}],t=[],a=[];if(e.length>0){var l=e[0],i={id:l.id,label:l.value};if(t.push(i),l.children){var r,n=Object(u.a)(l.children);try{for(n.s();!(r=n.n()).done;){var s=r.value,o=s.id,c={id:o,label:s.value};t.push(c);var d={from:1,to:o};a.push(d)}}catch(h){n.e(h)}finally{n.f()}}}this.setState({treeValue:e,graph:{nodes:t,edges:a}})}},{key:"changeTopologyView",value:function(e){var t=[],a=[],l=Object.assign({},e),i=l.id,r=l.value,n={};if(n.id=i,n.label=r,t.push(n),l.children){var s,o=Object(h.a)(l.children),c=Object(u.a)(o);try{for(c.s();!(s=c.n()).done;){var d=s.value,p=Object.assign({},d),m=p.id,v=p.value,f={};f.id=m,f.label=v,t.push(f);var b={};b.from=i,b.to=m,a.push(b)}}catch(g){c.e(g)}finally{c.f()}}this.setState({graph:{nodes:t,edges:a}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"Businessview"},o.a.createElement("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link active",id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true"},"Table")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link",id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false"},"Treelist and Topology"))),o.a.createElement("div",{className:"tab-content",id:"myTabContent"},o.a.createElement("div",{className:"tab-pane fade show active",id:"home",role:"tabpanel","aria-labelledby":"home-tab"},o.a.createElement("div",{className:"row view-table"},o.a.createElement("div",{className:"col-md-12",id:"viewTableDiv"},o.a.createElement("h3",null,"Work in progress for real time table view")))),o.a.createElement("div",{className:"tab-pane fade",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-4 treeview-div"},o.a.createElement(p,{treeValue:this.state.treeValue,changeTopology:this.changeTopologyView.bind(this)})),o.a.createElement("div",{className:"col-md-8 treeview-div"},o.a.createElement(v,{nodeData:this.state.graph}))))))}}]),a}(o.a.Component),D=function(e){Object(r.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={mockTableData:[],topologyView:!1},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){d.a.fn.extend({treed:function(e){var t="fa-minus",a="fa-plus";"undefined"!==typeof e&&("undefined"!==typeof e.openedClass&&(t=e.openedClass),"undefined"!==typeof e.closedClass&&(a=e.closedClass));var l=d()(this);l.addClass("tree"),l.find("li").has("ul").each((function(){var e=d()(this);e.prepend("<i class='fa "+a+"'></i>"),e.addClass("branch"),e.on("click",(function(e){this===e.target&&(d()(this).children("i:first").toggleClass(t+" "+a),d()(this).children().children().toggle())})),e.children().children().toggle()})),l.find(".branch .indicator").each((function(){d()(this).on("click",(function(){d()(this).closest("li").click()}))})),l.find(".branch>a").each((function(){d()(this).on("click",(function(e){d()(this).closest("li").click(),e.preventDefault()}))})),l.find(".branch>button").each((function(){d()(this).on("click",(function(e){d()(this).closest("li").click(),e.preventDefault()}))}))}})}},{key:"changeTopologyView",value:function(){this.setState({topologyView:c.event.target.checked})}},{key:"servedTopologyView",value:function(){return this.state.topologyView?o.a.createElement(V,{authToken:this.props.authToken,baseUrl:this.props.baseUrl,userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage,hideGlobalMessage:this.props.hideGlobalMessage}):o.a.createElement(j,{authToken:this.props.authToken,baseUrl:this.props.baseUrl,userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage,hideGlobalMessage:this.props.hideGlobalMessage,permissions:this.props.permissions})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"centered-div View"},o.a.createElement("div",{className:"centered-div-header"},o.a.createElement("div",{className:"row view-header"},o.a.createElement("div",{className:"col-sm-8"},o.a.createElement("h6",{id:"view-header-title"},"Topology view")),o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-5"},o.a.createElement("h6",null,"Technical view")),o.a.createElement("div",{className:"col-sm-2"},o.a.createElement("div",{className:"custom-control custom-switch"},o.a.createElement("input",{checked:this.state.topologyView,onChange:function(t){return e.changeTopologyView(t)},type:"checkbox",className:"custom-control-input",id:"viewComponentChange"}),o.a.createElement("label",{className:"custom-control-label cursor-pointer",htmlFor:"viewComponentChange"},"\xa0"))),o.a.createElement("div",{className:"col-sm-5"},o.a.createElement("h6",null,"Business view"))))),o.a.createElement("hr",null),o.a.createElement("div",{className:"col-md-12"},this.servedTopologyView())))}}]),a}(o.a.Component)}}]);
//# sourceMappingURL=16.8cefc6d6.chunk.js.map