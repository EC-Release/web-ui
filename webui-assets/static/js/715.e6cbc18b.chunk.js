"use strict";(self.webpackChunkec_admin_webui=self.webpackChunkec_admin_webui||[]).push([[715,762],{7715:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var n=a(2982),r=a(7762),s=a(5671),i=a(3144),o=a(9340),l=a(5716),c=a(2791),u=a(8890),d=a.n(u),p=a(8215),h=a(184),m=function(e){(0,o.Z)(a,e);var t=(0,l.Z)(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={tableData:[],newTableData:[],selectedSubscriptionId:"",showTableInit:!1,subscriptions:[],groupId:"",changeForm:!1,filterValue:""},n}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){var e=this,t=[];if(null!==sessionStorage.getItem("snapshotData")){var a=JSON.parse(sessionStorage.getItem("snapshotData")),n=[];Object.keys(a).forEach((function(e){n.push(a[e])}));for(var r=0,s=n;r<s.length;r++){var i=s[r];i.parent&&"f894e5a8-0f9b-46ca-8b74-57e94610d731"===i.parent&&t.push(i)}this.generateTableStructure(t),this.setState({tableData:t}),0===t.length&&(this.props.showGlobalMessage(!0,!0,"There is no Data","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3))}else this.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerForSubscriptionList),this.timerForSubscriptionList=null}},{key:"initTable",value:function(e,t){var a;a=d()("#groupupgradeTableDiv")[0].offsetWidth-200,d()("#"+e).DataTable({dom:'rt<"bottom"lp>',bSort:!0,scrollX:!0,language:{paginate:{previous:"<",next:">"}},createdRow:function(e,t,n){for(var r=0;r<t.length;r++)d()("td:eq("+r+")",e).css("min-width",a/t.length+"px")},pageLength:5,stateSave:t,destroy:!0,fnDrawCallback:function(e){e.aiDisplay.length<=5?d()(".dataTables_paginate").hide():d()(".dataTables_paginate").show()}}),d()(".bottom").addClass("row"),d()(".dataTables_length").addClass("col-sm-6"),d()(".dataTables_paginate").addClass("col-sm-6")}},{key:"getSubscriptionList",value:function(){fetch(this.props.baseUrl+"/listSubscriptions",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status&&e.json().then((function(e){if("ok"===e.errorStatus.status){var t=e.data;localStorage.setItem("subscriptions",JSON.stringify(t))}else console.log("Subscription list backgroung api error")}))})).catch((function(e){console.log(e),console.log("Subscription list backgroung api error")}))}},{key:"generateTableStructure",value:function(e){var t,a=this,n=[],s=(0,r.Z)(e);try{for(s.s();!(t=s.n()).done;){var i=t.value,o={};o.groupId=i.groupId,o.subscriptions=i.subscriptionId,n.push(o)}}catch(l){s.e(l)}finally{s.f()}this.setState({tableData:n,newTableData:n,showTableInit:!0}),setTimeout((function(){a.initTable("groupupgradeTable")}),100)}},{key:"edit",value:function(e){var t=this,a=void 0===e.subscriptions?[]:e.subscriptions,n=e.groupId;this.setState({subscriptions:a,groupId:n}),setTimeout((function(){t.setState({changeForm:!0})})),setTimeout((function(){d()("select").selectpicker()}),500)}},{key:"destroyDataTable",value:function(e){d()("#"+e).DataTable().destroy()}},{key:"filterData",value:function(e){var t=this;this.destroyDataTable("groupupgradeTable");var a,s=e.target.value.trim(),i=(0,n.Z)(this.state.tableData),o=[],l=(0,r.Z)(i);try{for(l.s();!(a=l.n()).done;){var c=a.value,u={};void 0!==c.groupId&&(u.groupId=c.groupId,o.push(u))}}catch(p){l.e(p)}finally{l.f()}var d=[];d=""!==s?o.filter((function(e){return e.groupId.toLowerCase().includes(s.toLowerCase())})):o,setTimeout((function(){t.setState({filterValue:s,newTableData:d}),t.initTable("groupupgradeTable")}),0)}},{key:"changeFormHandler",value:function(){var e=this;setTimeout((function(){e.setState({changeForm:!1,filterValue:""})}),0),this.generateTableStructure(this.state.tableData)}},{key:"render",value:function(){var e=this;return(0,h.jsx)("div",{className:"row Groupupgrade",children:this.state.changeForm?(0,h.jsxs)("div",{className:"col-md-12 centered-div",children:[(0,h.jsxs)("div",{className:"row text-center",children:[(0,h.jsxs)("div",{className:"col-sm-6",children:[(0,h.jsx)("div",{className:"col-sm-12 label text-left",children:"Group Id"}),(0,h.jsx)("div",{className:"col-sm-12 mb-2",children:(0,h.jsx)("input",{type:"text",className:"form-control form-control-sm",name:"subscriptionName",disabled:!0,value:this.state.groupId})})]}),(0,h.jsxs)("div",{className:"col-sm-6 text-center",children:[(0,h.jsx)("div",{className:"col-sm-12 label text-left",children:"Subscriptions"}),(0,h.jsx)("select",{className:"selectpicker form-control form-control-sm ",multiple:!0,"data-live-search":"true",name:"subscriptionId",value:this.state.subscriptions,readOnly:!0,children:this.state.subscriptions.map((function(e,t){return(0,h.jsx)("option",{value:e,children:e},"subscriptionOption"+t)}))})]})]}),(0,h.jsx)("div",{className:"row text-center",children:(0,h.jsx)("div",{className:"col-sm-12 mb-2 text-center",children:(0,h.jsx)("button",{id:"create-group-btn",onClick:function(){return e.changeFormHandler()},className:"btn btn-sm customize-view-btn",children:"Back"})})})]}):(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("div",{className:"row mt-2",children:(0,h.jsxs)("div",{className:"col-sm-6 text-left",children:[(0,h.jsx)("div",{className:"d-inline",children:(0,h.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-secondary disabled",children:[(0,h.jsx)("i",{className:"fa fa-filter"}),"FILTER"]})}),(0,h.jsx)("div",{className:"d-inline p-2",children:(0,h.jsx)("input",{type:"text",value:this.state.filterValue,className:"d-inline form-control form-control-sm search-field",onChange:function(t){e.filterData(t)}})})]})}),(0,h.jsxs)("div",{className:"row",children:[" ",null," "]}),(0,h.jsx)("div",{className:"centered-div",children:(0,h.jsx)("div",{id:"groupupgradeTableDiv",children:this.state.showTableInit?this.state.newTableData.length>0?(0,h.jsxs)("table",{id:"groupupgradeTable",className:"table text-center",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Group ID"}),this.props.permissions.accesses.maintain.subMenus.groups.view?(0,h.jsx)("th",{children:"Action"}):null]})}),(0,h.jsx)("tbody",{children:this.state.newTableData.map((function(t,a){return(0,h.jsxs)("tr",{id:"groupupgradeTableTbodyTr_"+a,children:[(0,h.jsx)("td",{children:t.groupId}),e.props.permissions.accesses.maintain.subMenus.groups.delete?(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"action-img",children:(0,h.jsx)("i",{onClick:e.edit.bind(e,t),className:"fa fa-eye cursor-pointer",title:"View"})})}):null]},"groupupgradeTableTbodyTr_"+a)}))})]}):(0,h.jsx)("div",{className:"row mt-2",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)("div",{className:"alert alert-success",role:"alert",children:"No record found!"})})}):(0,h.jsx)("p",{className:"text-center loader-icon",children:(0,h.jsx)("img",{alt:"loading",src:p.Z})})})})]})})}}]),a}(c.Component)},907:function(e,t,a){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a.d(t,{Z:function(){return n}})},7762:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(181);function r(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=(0,n.Z)(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}},2982:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(907);var r=a(181);function s(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(907);function r(e,t){if(e){if("string"===typeof e)return(0,n.Z)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,n.Z)(e,t):void 0}}}}]);
//# sourceMappingURL=715.e6cbc18b.chunk.js.map