"use strict";(self.webpackChunkec_admin_webui=self.webpackChunkec_admin_webui||[]).push([[622],{6329:function(e,a,s){s(2791);a.Z=s.p+"static/media/icondelete_tablemaintainmonitor.f14bffdc09e994cbbe0753461f3d9d2c.svg"},9559:function(e,a,s){s(2791);a.Z=s.p+"static/media/iconedit_tablemaintainmonitor.26856b96228dda93f7ced9a4c5284404.svg"},622:function(e,a,s){s.r(a),s.d(a,{default:function(){return v}});var t=s(2982),i=s(7762),n=s(5671),r=s(3144),l=s(9340),o=s(5716),d=s(2791),c=s(8890),u=s.n(c),h=s(994),p=s(9559),b=s(6329),m=s(8215),f=s(184),v=function(e){(0,l.Z)(s,e);var a=(0,o.Z)(s);function s(e){var t;return(0,n.Z)(this,s),(t=a.call(this,e)).state={tableData:[],newTableData:[],viewTable:!0,editItemData:{},searchString:"",showTableInit:!1},t}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){this.handleDataTable(!1)}},{key:"handleDataTable",value:function(e){var a=this,s=[];if(null!==sessionStorage.getItem("snapshotData")){var t=JSON.parse(sessionStorage.getItem("snapshotData")),i=[];Object.keys(t).forEach((function(e){i.push(t[e])}));for(var n=0,r=i;n<r.length;n++){var l=r[n];l.parent&&"ab2a2691-a563-486c-9883-5111ff36ba9b"===l.parent&&s.push(l)}this.generateTableStructure(s,e),this.setState({tableData:s})}else this.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){a.props.hideGlobalMessage()}),2e3)}},{key:"initTable",value:function(e,a){var s;s=u()("#subscriptionupgradeTableDiv")[0].offsetWidth-200,u()("#"+e).DataTable({dom:'rt<"bottom"lp>',bSort:!0,scrollX:!0,language:{paginate:{previous:"<",next:">"}},createdRow:function(e,a,t){for(var i=0;i<a.length;i++)u()("td:eq("+i+")",e).css("min-width",s/a.length+"px")},pageLength:5,stateSave:a,destroy:!0,fnDrawCallback:function(e){e.aiDisplay.length<=5?u()(".dataTables_paginate").hide():u()(".dataTables_paginate").show()}}),u()(".bottom").addClass("row"),u()(".dataTables_length").addClass("col-sm-6"),u()(".dataTables_paginate").addClass("col-sm-6")}},{key:"generateTableStructure",value:function(e,a){var s,t=this,n=e,r=[],l=(0,i.Z)(n);try{for(l.s();!(s=l.n()).done;){var o=s.value,d={};d.licenseId=o.licenseId,d.emailAddress=o.emailAddress,d.date=o.date,d.sso=o.sso,d.desc=o.desc,d.username=o.username,d.key=o.key,d.parent=o.parent,d.name=o.name,r.push(d)}}catch(c){l.e(c)}finally{l.f()}this.setState({newTableData:r,showTableInit:!0}),setTimeout((function(){t.initTable("subscriptionupgradeTable",a)}),100)}},{key:"showHideTableTdData",value:function(e,a){var s=(0,t.Z)(this.state.newTableData),i=Object.assign({},s[e]);if("subscriptionId"===a){var n=i.subscriptionId;i.subscriptionId=i.subscriptionIdHidden,i.subscriptionIdHidden=n,i.subscriptionIdHiddenFlag=!i.subscriptionIdHiddenFlag,s[e]=i}else if("serviceUri"===a){var r=i.serviceUri;i.serviceUri=i.serviceUriHidden,i.serviceUriHidden=r,i.serviceUriHiddenFlag=!i.serviceUriHiddenFlag,s[e]=i}else if("subscriptionName"===a){var l=i.subscriptionName;i.subscriptionName=i.subscriptionNameHidden,i.subscriptionNameHidden=l,i.subscriptionNameHiddenFlag=!i.subscriptionNameHiddenFlag,s[e]=i}else if("uaaUrl"===a){var o=i.uaaUrl;i.uaaUrl=i.uaaUrlHidden,i.uaaUrlHidden=o,i.uaaUrlHiddenFlag=!i.uaaUrlHiddenFlag,s[e]=i}this.setState({newTableData:s})}},{key:"filterByValue",value:function(e,a){for(var s=[],t=0;t<e.length;t++)(e[t].licenseId.toLowerCase().includes(a.toLowerCase())||e[t].emailAddress.toLowerCase().includes(a.toLowerCase())||e[t].date.includes(a)||e[t].sso.includes(a)||e[t].username.includes(a))&&s.push(e[t]);return s}},{key:"destroyDataTable",value:function(e){u()("#"+e).DataTable().destroy()}},{key:"filterData",value:function(e){var a=this;this.destroyDataTable("subscriptionupgradeTable");var s=e.target.value.trim(),n=e.target.value,r=(0,t.Z)(this.state.tableData),l=[],o=[];l=""!==s?this.filterByValue(r,s):r;var d,c=(0,i.Z)(l);try{for(c.s();!(d=c.n()).done;){var u=d.value,h={};h.licenseId=u.licenseId,h.emailAddress=u.emailAddress,h.date=u.date,h.sso=u.sso,h.desc=u.desc,h.username=u.username,o.push(h)}}catch(p){c.e(p)}finally{c.f()}this.setState({newTableData:o,searchString:n}),setTimeout((function(){a.initTable("subscriptionupgradeTable",!1)}),0)}},{key:"edit",value:function(e){var a=Object.assign({},e);this.destroyDataTable("subscriptionupgradeTable"),this.setState({editItemData:a,viewTable:!1})}},{key:"removeDataTableRow",value:function(e,a){u()("#"+e).DataTable().row("#"+e+"TbodyTr_"+a).remove().draw(!1)}},{key:"deleteData",value:function(e,a){var s=this;window.confirm("Are you sure you want to delete")&&(this.props.showGlobalMessage(!0,!0,"Please Wait....","custom-success"),fetch(this.props.baseUrl+e.key,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){if(200===e.status)e.json().then((function(e){s.props.showGlobalMessage(!1,!0,"Record deleted successfuly","custom-success"),s.removeDataTableRow("subscriptionupgradeTable",a);var t=s;setTimeout((function(){t.props.hideGlobalMessage()}),2e3),t.snapshotUpdate()}));else{s.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger");var t=s;setTimeout((function(){t.props.hideGlobalMessage()}),2e3)}})).catch((function(e){console.log(e),s.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){s.props.hideGlobalMessage()}),2e3)})))}},{key:"snapshotUpdate",value:function(){fetch(this.props.baseUrl+"snapshot",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status&&e.json().then((function(e){sessionStorage.setItem("snapshotData",JSON.stringify(e))}))}))}},{key:"changeView",value:function(){var e=this;this.handleDataTable(!1),this.setState({viewTable:!0}),setTimeout((function(){e.initTable("subscriptionupgradeTable",!0)}),0)}},{key:"render",value:function(){var e=this;return(0,f.jsx)("div",{children:this.state.viewTable?(0,f.jsx)("div",{className:"row Subscriptionupgrade",children:(0,f.jsxs)("div",{className:"col-md-12",children:[(0,f.jsx)("div",{className:"row mt-2",children:(0,f.jsxs)("div",{className:"col-sm-6 text-left",children:[(0,f.jsx)("div",{className:"d-inline",children:(0,f.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-secondary disabled",children:[(0,f.jsx)("i",{className:"fa fa-filter"}),"FILTER"]})}),(0,f.jsx)("div",{className:"d-inline p-2",children:(0,f.jsx)("input",{type:"text",value:this.state.searchString,className:"d-inline form-control form-control-sm search-field",onChange:function(a){e.filterData(a)}})})]})}),(0,f.jsx)("div",{className:"centered-div",children:(0,f.jsx)("div",{id:"subscriptionupgradeTableDiv",children:this.state.showTableInit?this.state.newTableData.length>0?(0,f.jsxs)("table",{id:"subscriptionupgradeTable",className:"table text-center",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"License ID"}),(0,f.jsx)("th",{children:"Email Address"}),(0,f.jsx)("th",{children:"Expiry Date"}),(0,f.jsx)("th",{children:"SSO"}),(0,f.jsx)("th",{children:"Actions"})]})}),(0,f.jsx)("tbody",{children:this.state.newTableData.map((function(a,s){return(0,f.jsxs)("tr",{id:"subscriptionupgradeTableTbodyTr_"+s,children:[(0,f.jsx)("td",{children:a.licenseId}),(0,f.jsx)("td",{children:a.emailAddress}),(0,f.jsx)("td",{children:a.date}),(0,f.jsx)("td",{children:a.sso}),(0,f.jsx)("td",{children:(0,f.jsxs)("span",{className:"action-img",children:[e.props.permissions.accesses.maintain.subMenus.subscriptions.edit?(0,f.jsx)("img",{onClick:e.edit.bind(e,a),alt:"edit-icon",title:"Edit",src:p.Z}):null,e.props.permissions.accesses.maintain.subMenus.subscriptions.delete?(0,f.jsx)("img",{alt:"delete-icon",onClick:e.deleteData.bind(e,a,s),title:"Delete",src:b.Z}):null]})})]},"subscriptionupgradeTableTbodyTr_"+s)}))})]}):(0,f.jsx)("div",{className:"row mt-2",children:(0,f.jsx)("div",{className:"col-md-12",children:(0,f.jsx)("div",{className:"alert alert-success",role:"alert",children:"No record found!"})})}):(0,f.jsx)("p",{className:"text-center loader-icon",children:(0,f.jsx)("img",{alt:"loading",src:m.Z})})})})]})}):(0,f.jsx)(h.Z,{authToken:this.props.authToken,helpText:this.props.helpText,handleDataTable:this.handleDataTable.bind(this),baseUrl:this.props.baseUrl,userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage.bind(this),hideGlobalMessage:this.props.hideGlobalMessage.bind(this),changeView:this.changeView.bind(this),editItemData:this.state.editItemData,isViewOnly:!1})})}}]),s}(d.Component)}}]);
//# sourceMappingURL=622.70376a15.chunk.js.map