"use strict";(self.webpackChunkec_admin_webui=self.webpackChunkec_admin_webui||[]).push([[711],{1711:function(e,s,a){a.r(s),a.d(s,{default:function(){return m}});var t=a(2982),i=a(7762),n=a(5671),r=a(3144),l=a(9340),o=a(5716),d=a(2791),c=a(8890),u=a.n(c),h=a(994),b=a(8215),p=a(184),m=function(e){(0,l.Z)(a,e);var s=(0,o.Z)(a);function a(e){var t;return(0,n.Z)(this,a),(t=s.call(this,e)).state={tableData:[],newTableData:[],viewTable:!0,editItemData:{},searchString:"",showTableInit:!1},t}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){this.handleDataTable(!1)}},{key:"handleDataTable",value:function(e){var s=this,a=[];if(null!==sessionStorage.getItem("snapshotData")){var t=JSON.parse(sessionStorage.getItem("snapshotData")),i=[];Object.keys(t).forEach((function(e){i.push(t[e])}));for(var n=0,r=i;n<r.length;n++){var l=r[n];l.parent&&"ab2a2691-a563-486c-9883-5111ff36ba9b"===l.parent&&(console.log(l),a.push(l))}this.generateTableStructure(a,e),this.setState({tableData:a})}else this.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){s.props.hideGlobalMessage()}),2e3)}},{key:"initTable",value:function(e,s){var a;a=u()("#subscriptionupgradeTableDiv")[0].offsetWidth-200,u()("#"+e).DataTable({dom:'rt<"bottom"lp>',bSort:!0,scrollX:!0,language:{paginate:{previous:"<",next:">"}},createdRow:function(e,s,t){for(var i=0;i<s.length;i++)u()("td:eq("+i+")",e).css("min-width",a/s.length+"px")},pageLength:5,stateSave:s,destroy:!0,fnDrawCallback:function(e){e.aiDisplay.length<=5?u()(".dataTables_paginate").hide():u()(".dataTables_paginate").show()}}),u()(".bottom").addClass("row"),u()(".dataTables_length").addClass("col-sm-6"),u()(".dataTables_paginate").addClass("col-sm-6")}},{key:"generateTableStructure",value:function(e,s){var a,t=this,n=e,r=[],l=(0,i.Z)(n);try{for(l.s();!(a=l.n()).done;){var o=a.value,d={};d.licenseId=o.licenseId,d.emailAddress=o.emailAddress,d.date=o.date,d.sso=o.sso,d.username=o.username,d.desc=o.desc,d.key=o.key,r.push(d)}}catch(c){l.e(c)}finally{l.f()}this.setState({newTableData:r,showTableInit:!0}),setTimeout((function(){t.initTable("subscriptionupgradeTable",s)}),100)}},{key:"showHideTableTdData",value:function(e,s){var a=(0,t.Z)(this.state.newTableData),i=Object.assign({},a[e]);if("subscriptionId"===s){var n=i.subscriptionId;i.subscriptionId=i.subscriptionIdHidden,i.subscriptionIdHidden=n,i.subscriptionIdHiddenFlag=!i.subscriptionIdHiddenFlag,a[e]=i}else if("serviceUri"===s){var r=i.serviceUri;i.serviceUri=i.serviceUriHidden,i.serviceUriHidden=r,i.serviceUriHiddenFlag=!i.serviceUriHiddenFlag,a[e]=i}else if("subscriptionName"===s){var l=i.subscriptionName;i.subscriptionName=i.subscriptionNameHidden,i.subscriptionNameHidden=l,i.subscriptionNameHiddenFlag=!i.subscriptionNameHiddenFlag,a[e]=i}else if("uaaUrl"===s){var o=i.uaaUrl;i.uaaUrl=i.uaaUrlHidden,i.uaaUrlHidden=o,i.uaaUrlHiddenFlag=!i.uaaUrlHiddenFlag,a[e]=i}this.setState({newTableData:a})}},{key:"filterByValue",value:function(e,s){for(var a=[],t=0;t<e.length;t++)(e[t].licenseId.toLowerCase().includes(s.toLowerCase())||e[t].emailAddress.toLowerCase().includes(s.toLowerCase())||e[t].date.includes(s)||e[t].sso.includes(s))&&a.push(e[t]);return a}},{key:"destroyDataTable",value:function(e){u()("#"+e).DataTable().destroy()}},{key:"filterData",value:function(e){var s=this;this.destroyDataTable("subscriptionupgradeTable");var a=e.target.value.trim(),n=e.target.value,r=(0,t.Z)(this.state.tableData),l=[],o=[];l=""!==a?this.filterByValue(r,a):r;var d,c=(0,i.Z)(l);try{for(c.s();!(d=c.n()).done;){var u=d.value,h={};h.licenseId=u.licenseId,h.emailAddress=u.emailAddress,h.date=u.date,h.sso=u.sso,h.username=u.username,h.desc=u.desc,o.push(h)}}catch(b){c.e(b)}finally{c.f()}this.setState({newTableData:o,searchString:n}),setTimeout((function(){s.initTable("subscriptionupgradeTable",!1)}),0)}},{key:"edit",value:function(e){var s=Object.assign({},e);this.destroyDataTable("subscriptionupgradeTable"),this.setState({editItemData:s,viewTable:!1})}},{key:"removeDataTableRow",value:function(e,s){u()("#"+e).DataTable().row("#"+e+"TbodyTr_"+s).remove().draw(!1)}},{key:"deleteData",value:function(e,s){var a=this;if(window.confirm("Are you sure you want to delete")){var t=e.subscriptionId;e.subscriptionIdHiddenFlag&&(t=e.subscriptionIdHidden),this.props.showGlobalMessage(!0,!0,"Please Wait....","custom-success"),fetch(this.props.baseUrl+"/deleteSubscription?subscriptionID="+t,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){if(200===e.status)e.json().then((function(e){if("ok"===e.errorStatus.status){a.props.showGlobalMessage(!1,!0,"Record deleted successfuly","custom-success"),a.removeDataTableRow("subscriptionupgradeTable",s);var t=a;setTimeout((function(){t.props.hideGlobalMessage()}),2e3)}else a.props.showGlobalMessage(!0,!0,e.errorStatus.statusMsg,"custom-danger"),setTimeout((function(){a.props.hideGlobalMessage()}),2e3)}));else{a.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger");var t=a;setTimeout((function(){t.props.hideGlobalMessage()}),2e3)}})).catch((function(e){console.log(e),a.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){a.props.hideGlobalMessage()}),2e3)}))}}},{key:"changeView",value:function(){var e=this;this.setState({viewTable:!0}),setTimeout((function(){e.initTable("subscriptionupgradeTable",!0)}),0)}},{key:"render",value:function(){var e=this;return(0,p.jsx)("div",{children:this.state.viewTable?(0,p.jsx)("div",{className:"row Subscriptionupgrade",children:(0,p.jsxs)("div",{className:"col-md-12",children:[(0,p.jsx)("div",{className:"row mt-2",children:(0,p.jsxs)("div",{className:"col-sm-6 text-left",children:[(0,p.jsx)("div",{className:"d-inline",children:(0,p.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-secondary disabled",children:[(0,p.jsx)("i",{className:"fa fa-filter"}),"FILTER"]})}),(0,p.jsx)("div",{className:"d-inline p-2",children:(0,p.jsx)("input",{type:"text",value:this.state.searchString,className:"d-inline form-control form-control-sm search-field",onChange:function(s){e.filterData(s)}})})]})}),(0,p.jsx)("div",{className:"centered-div",children:(0,p.jsx)("div",{id:"subscriptionupgradeTableDiv",children:this.state.showTableInit?this.state.newTableData.length>0?(0,p.jsxs)("table",{id:"subscriptionupgradeTable",className:"table text-center",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"License ID"}),(0,p.jsx)("th",{children:"Email Address"}),(0,p.jsx)("th",{children:"Expiry Date"}),(0,p.jsx)("th",{children:"SSO"}),(0,p.jsx)("th",{children:"Actions"})]})}),(0,p.jsx)("tbody",{children:this.state.newTableData.map((function(s,a){return(0,p.jsxs)("tr",{id:"subscriptionupgradeTableTbodyTr_"+a,children:[(0,p.jsx)("td",{children:s.licenseId}),(0,p.jsx)("td",{children:s.emailAddress}),(0,p.jsx)("td",{children:s.date}),(0,p.jsx)("td",{children:s.sso}),(0,p.jsx)("td",{children:(0,p.jsx)("span",{className:"action-img",children:(0,p.jsx)("i",{onClick:e.edit.bind(e,s),className:"fa fa-eye cursor-pointer",title:"View"})})})]},"subscriptionupgradeTableTbodyTr_"+a)}))})]}):(0,p.jsx)("div",{className:"row mt-2",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsx)("div",{className:"alert alert-success",role:"alert",children:"No record found!"})})}):(0,p.jsx)("p",{className:"text-center loader-icon",children:(0,p.jsx)("img",{alt:"loading",src:b.Z})})})})]})}):(0,p.jsx)(h.Z,{authToken:this.props.authToken,helpText:this.props.helpText,handleDataTable:this.handleDataTable.bind(this),baseUrl:this.props.baseUrl,userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage.bind(this),hideGlobalMessage:this.props.hideGlobalMessage.bind(this),changeView:this.changeView.bind(this),editItemData:this.state.editItemData,isViewOnly:!0})})}}]),a}(d.Component)}}]);
//# sourceMappingURL=711.b4ae840f.chunk.js.map