"use strict";(self.webpackChunkec_admin_webui=self.webpackChunkec_admin_webui||[]).push([[806,762],{6329:function(e,t,a){a(2791);t.Z=a.p+"static/media/icondelete_tablemaintainmonitor.f14bffdc09e994cbbe0753461f3d9d2c.svg"},9559:function(e,t,a){a(2791);t.Z=a.p+"static/media/iconedit_tablemaintainmonitor.26856b96228dda93f7ced9a4c5284404.svg"},7806:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var s=a(1413),r=a(2982),o=a(7762),n=a(5671),i=a(3144),l=a(9340),u=a(5716),c=a(2791),d=a(8890),p=a.n(d),h=a(9559),m=a(6329),f=a(8215),g=a(184),b=function(e){(0,l.Z)(a,e);var t=(0,u.Z)(a);function a(e){var s;return(0,n.Z)(this,a),(s=t.call(this,e)).state={tableData:[],newTableData:[],selectedSubscriptionId:"",showTableInit:!1,subscriptions:[],filterValue:"",groupForm:{subscriptionId:{value:[],dirtyState:!1},groupId:{value:"",dirtyState:!1}},changeForm:!1,errorsGroupForm:{},groupFormIsValid:!1},s}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){var e=this,t=[],a=[];if(null!==sessionStorage.getItem("snapshotData")){var s=JSON.parse(sessionStorage.getItem("snapshotData")),r=[];Object.keys(s).forEach((function(e){r.push(s[e])}));for(var o=0,n=r;o<n.length;o++){var i=n[o];i.parent&&("f894e5a8-0f9b-46ca-8b74-57e94610d731"===i.parent&&a.push(i),"ab2a2691-a563-486c-9883-5111ff36ba9b"===i.parent&&t.push(i))}this.generateTableStructure(a),this.setState({tableData:a,subscriptions:t}),console.log(a),0===a.length&&(this.props.showGlobalMessage(!0,!0,"There is no Data","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3))}else this.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerForSubscriptionList),this.timerForSubscriptionList=null}},{key:"getSubscriptionList",value:function(){fetch(this.props.baseUrl+"/listSubscriptions",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status&&e.json().then((function(e){if("ok"===e.errorStatus.status){var t=e.data;localStorage.setItem("subscriptions",JSON.stringify(t))}else console.log("Subscription list backgroung api error")}))})).catch((function(e){console.log(e),console.log("Subscription list backgroung api error")}))}},{key:"initTable",value:function(e,t){var a;a=p()("#groupupgradeTableDiv")[0].offsetWidth-200,p()("#"+e).DataTable({dom:'rt<"bottom"lp>',bSort:!0,scrollX:!0,language:{paginate:{previous:"<",next:">"}},createdRow:function(e,t,s){for(var r=0;r<t.length;r++)p()("td:eq("+r+")",e).css("min-width",a/t.length+"px")},pageLength:5,stateSave:t,destroy:!0,fnDrawCallback:function(e){e.aiDisplay.length<=5?p()(".dataTables_paginate").hide():p()(".dataTables_paginate").show()}}),p()(".bottom").addClass("row"),p()(".dataTables_length").addClass("col-sm-6"),p()(".dataTables_paginate").addClass("col-sm-6")}},{key:"generateTableStructure",value:function(e){var t,a=this,s=[],r=(0,o.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,i={};i.groupId=n.groupId,i.subscriptionId=n.subscriptionId,i.key=n.key,s.push(i)}}catch(l){r.e(l)}finally{r.f()}this.setState({tableData:s,newTableData:s,showTableInit:!0}),setTimeout((function(){a.initTable("groupupgradeTable")}),100)}},{key:"destroyDataTable",value:function(e){p()("#"+e).DataTable().destroy()}},{key:"getDataOnChange",value:function(e){var t=this,a=e.target.value;this.destroyDataTable("groupupgradeTable"),this.setState({selectedSubscriptionId:a,showTableInit:!1}),""===a?(this.setState({tableData:[]}),this.generateTableStructure([])):fetch("https://reqres.in/api/users/2",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status?e.json().then((function(e){var s=e.data;if("ok"===(e={errorStatus:{status:"ok"}}).errorStatus.status){var n=JSON.parse(localStorage.getItem("newlyCreatedGroups"))||[],i=n.findIndex((function(e){return e.subscriptionId===a}));if(-1!==i){var l=(0,r.Z)(n[i].createdData);if(l.length>0){var u,c=(0,o.Z)(l);try{for(c.s();!(u=c.n()).done;){var d=u.value,p={groupId:d.groupId,ids:{aid:d.aid,tid:d.tid}};s.push(p)}}catch(h){c.e(h)}finally{c.f()}}}t.setState({tableData:s}),t.generateTableStructure(s)}else t.props.showGlobalMessage(!0,!0,e.errorStatus.statusMsg,"custom-danger"),setTimeout((function(){t.props.hideGlobalMessage()}),2e3)})):(t.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){t.props.hideGlobalMessage()}),2e3))})).catch((function(e){console.log(e),t.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){t.props.hideGlobalMessage()}),2e3)}))}},{key:"filterByValue",value:function(e,t){for(var a=[],s=0;s<e.length;s++)e[s].groupId.toLowerCase().includes(t.toLowerCase())&&a.push(e[s]);return a}},{key:"filterData",value:function(e){var t=this;this.destroyDataTable("groupupgradeTable");var a,s=e.target.value.trim(),n=(0,r.Z)(this.state.tableData),i=[],l=(0,o.Z)(n);try{for(l.s();!(a=l.n()).done;){var u=a.value,c={};void 0!==u.groupId&&(c.groupId=u.groupId,i.push(c))}}catch(p){l.e(p)}finally{l.f()}var d=[];d=""!==s?i.filter((function(e){return e.groupId.toLowerCase().includes(s.toLowerCase())})):i,this.setState({filterValue:s,newTableData:d}),setTimeout((function(){t.initTable("groupupgradeTable")}),0)}},{key:"removeDataTableRow",value:function(e,t){p()("#"+e).DataTable().row("#"+e+"TbodyTr_"+t).remove().draw(!1)}},{key:"deleteData",value:function(e,t){var a=this;window.confirm("Are you sure you want to delete")&&(this.props.showGlobalMessage(!0,!0,"Please Wait....","custom-success"),fetch(this.props.baseUrl+e.key,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){if(200===e.status)e.json().then((function(e){a.props.showGlobalMessage(!1,!0,"Record deleted successfuly","custom-success"),a.removeDataTableRow("groupupgradeTable",t);var s=a;setTimeout((function(){s.props.hideGlobalMessage()}),2e3)}));else{a.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger");var s=a;setTimeout((function(){s.props.hideGlobalMessage()}),2e3)}})).catch((function(e){console.log(e),a.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){a.props.hideGlobalMessage()}),2e3)})))}},{key:"editData",value:function(e){var t=this,a=(0,s.Z)({},this.state.groupForm);a.groupId.value=e.groupId,a.subscriptionId.value=e.subscriptionId,this.setState({groupForm:a,currentKey:e.key}),setTimeout((function(){t.setState({changeForm:!0})})),setTimeout((function(){p()("select").selectpicker()}),500)}},{key:"updategroup",value:function(){var e=this;this.props.showGlobalMessage(!1,!0,"Record update initiated. Please check after some time.","custom-success");var t={};t.subscriptionId=this.state.groupForm.subscriptions.value,t.groupId=this.state.groupForm.groupId.value,t.parent="f894e5a8-0f9b-46ca-8b74-57e94610d731",t.name="GroupName",fetch(this.props.baseUrl+this.state.currentKey,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken},body:JSON.stringify(t)}).then((function(a){200===a.status?a.json().then((function(a){e.props.showGlobalMessage(!0,!0,a.errorStatus.statusMsg,"custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3);var s=JSON.parse(sessionStorage.getItem("newlyCreatedGroups")),o=s.findIndex((function(e){return e.subscriptionId===t.subscriptionId})),n=(0,r.Z)(s[o].createdData),i=n.findIndex((function(e){return e.groupId===t.groupId}));n.splice(i,1),s[o].createdData=n,sessionStorage.setItem("newlyCreatedGroups",JSON.stringify(s))})):(e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3))})).catch((function(t){console.log(t),e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3)}))}},{key:"handleFormData",value:function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value,s=Object.assign({},this.state.groupForm);if("subscriptionId"===t){var r=Array.from(e.target.selectedOptions,(function(e){return e.value}));s.subscriptionId.value=r,s.subscriptionId.dirtyState=!0}else"groupId"===t&&(s.groupId.value=a,s.groupId.dirtyState=!0);this.setState({groupForm:s}),this.handleFormValidation()}},{key:"handleFormValidation",value:function(){var e,t=this.state.groupForm,a=t.subscriptionId.value,s=t.groupId.value,r=t.groupId.dirtyState,n=!0,i={},l=!1,u=(0,o.Z)(a);try{for(u.s();!(e=u.n()).done;){""!==e.value.trim()&&(l=!0)}}catch(c){u.e(c)}finally{u.f()}l||(i.subscriptionId="Please select Subscription ID",n=!1),""===s.trim()&&(r&&(i.groupId="Please enter Group ID"),n=!1),this.setState({groupFormIsValid:n,errorsGroupForm:i})}},{key:"changeFormHandler",value:function(){var e=this;setTimeout((function(){e.setState({changeForm:!1,filterValue:""})}),0),this.generateTableStructure(this.state.tableData)}},{key:"render",value:function(){var e=this;return(0,g.jsx)(c.Fragment,{children:this.state.changeForm?(0,g.jsx)("div",{className:"row Groupupgrade",children:(0,g.jsxs)("div",{className:"col-md-12 centered-div",children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsxs)("div",{className:"col-sm-6",children:[(0,g.jsx)("div",{className:"col-sm-12 label text-left",children:"Group Id"}),(0,g.jsxs)("div",{className:"col-sm-12 mb-2",children:[(0,g.jsx)("input",{type:"text",className:"form-control form-control-sm",name:"groupId",onChange:function(t){e.handleFormData(t)},value:this.state.groupForm.groupId.value}),(0,g.jsx)("small",{className:"text-danger",children:this.state.errorsGroupForm.groupId})]})]}),(0,g.jsxs)("div",{className:"col-sm-6 text-center",children:[(0,g.jsx)("div",{className:"col-sm-12 label",children:"Subscriptions"}),(0,g.jsx)("select",{className:"selectpicker form-control form-control-sm ",multiple:!0,"data-live-search":"true",name:"subscriptionId",value:this.state.groupForm.subscriptionId.value,onChange:function(t){e.handleFormData(t)},children:this.state.subscriptions.map((function(e,t){return(0,g.jsx)("option",{value:e.licenseId,children:e.licenseId},"subscriptionOption_"+t)}))}),(0,g.jsx)("small",{className:"text-danger",children:this.state.errorsGroupForm.subscriptionId})]})]}),(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-sm-12 mb-2 text-center",children:[(0,g.jsx)("button",{id:"update-group-btn",disabled:!this.state.groupFormIsValid,onClick:this.updategroup.bind(this),className:"btn btn-sm customize-view-btn mr-2",children:"UPDATE GROUP"}),(0,g.jsx)("button",{onClick:function(){return e.changeFormHandler()},className:"btn btn-sm customize-view-btn",children:"Back"})]})})]})}):(0,g.jsx)("div",{className:"row Groupupgrade",children:(0,g.jsxs)("div",{className:"col-md-12",children:[(0,g.jsx)("div",{className:"row mt-2",children:(0,g.jsxs)("div",{className:"col-sm-6 text-left",children:[(0,g.jsx)("div",{className:"d-inline",children:(0,g.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-secondary disabled",children:[(0,g.jsx)("i",{className:"fa fa-filter"}),"FILTER"]})}),(0,g.jsx)("div",{className:"d-inline p-2",children:(0,g.jsx)("input",{type:"text",className:"d-inline form-control form-control-sm search-field",onChange:function(t){e.filterData(t)},value:this.state.filterValue})})]})}),(0,g.jsxs)("div",{className:"row",children:[" ",null," "]}),(0,g.jsx)("div",{className:"centered-div",children:(0,g.jsx)("div",{id:"groupupgradeTableDiv",children:this.state.showTableInit?this.state.newTableData.length>0?(0,g.jsxs)("table",{id:"groupupgradeTable",className:"table text-center",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Group ID"}),this.props.permissions.accesses.maintain.subMenus.groups.delete||this.props.permissions.accesses.maintain.subMenus.groups.edit?(0,g.jsx)("th",{children:"Action"}):null]})}),(0,g.jsx)("tbody",{children:this.state.newTableData.map((function(t,a){return(0,g.jsxs)("tr",{id:"groupupgradeTableTbodyTr_"+a,children:[(0,g.jsx)("td",{children:t.groupId}),(0,g.jsx)("td",{children:(0,g.jsxs)("span",{className:"action-img",children:[e.props.permissions.accesses.maintain.subMenus.groups.edit?(0,g.jsx)("img",{alt:"delete-icon",onClick:e.editData.bind(e,t,a),title:"edit",src:h.Z}):null,e.props.permissions.accesses.maintain.subMenus.groups.delete?(0,g.jsx)("img",{alt:"delete-icon",onClick:e.deleteData.bind(e,t,a),title:"Delete",src:m.Z}):null]})})]},"groupupgradeTableTbodyTr_"+a)}))})]}):(0,g.jsx)("div",{className:"row mt-2",children:(0,g.jsx)("div",{className:"col-md-12",children:(0,g.jsx)("div",{className:"alert alert-success",role:"alert",children:"No record found!"})})}):(0,g.jsx)("p",{className:"text-center loader-icon",children:(0,g.jsx)("img",{alt:"loading",src:f.Z})})})})]})})})}}]),a}(c.Component)},907:function(e,t,a){function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}a.d(t,{Z:function(){return s}})},7762:function(e,t,a){a.d(t,{Z:function(){return r}});var s=a(181);function r(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=(0,s.Z)(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){l=!0,n=e},f:function(){try{i||null==a.return||a.return()}finally{if(l)throw n}}}}},2982:function(e,t,a){a.d(t,{Z:function(){return o}});var s=a(907);var r=a(181);function o(e){return function(e){if(Array.isArray(e))return(0,s.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,a){a.d(t,{Z:function(){return r}});var s=a(907);function r(e,t){if(e){if("string"===typeof e)return(0,s.Z)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,s.Z)(e,t):void 0}}}}]);
//# sourceMappingURL=806.8c71addb.chunk.js.map