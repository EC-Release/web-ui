"use strict";(self.webpackChunkec_admin_webui=self.webpackChunkec_admin_webui||[]).push([[88,762],{1905:function(e,t,r){r(2791);t.Z=r.p+"static/media/icon_greensortingdown.31d2161218970ff2041dbc045ec6fafd.svg"},4088:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var s=r(2982),o=r(7762),n=r(5671),a=r(3144),i=r(9340),c=r(5716),l=r(2791),u=r(8890),d=r.n(u),p=r(1905),m=r(184),h=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(e){var s;return(0,n.Z)(this,r),(s=t.call(this,e)).state={groupForm:{subscriptionId:{value:[],dirtyState:!1},groupId:{value:"",dirtyState:!1}},errorsGroupForm:{},groupFormIsValid:!1,subscriptions:[],keyName:""},s}return(0,a.Z)(r,[{key:"enableToolTip",value:function(){setTimeout((function(){d()('[data-toggle="popover"]').popover()}),1e3)}},{key:"componentDidMount",value:function(){var e=this;if(this.enableToolTip(),this.props.showGlobalMessage(!0,!0,"Please wait...","custom-success"),null!==sessionStorage.getItem("snapshotData")){var t=JSON.parse(sessionStorage.getItem("snapshotData")),r=[],s=[],o=[];Object.keys(t).forEach((function(e){r.push(t[e])}));for(var n=0,a=r;n<a.length;n++){var i=a[n];i.parent&&("ab2a2691-a563-486c-9883-5111ff36ba9b"===i.parent&&s.push(i),"f894e5a8-0f9b-46ca-8b74-57e94610d731"===i.parent&&o.push(i))}if(this.setState({keyName:"Group["+o.length+"]"}),s.length>0){var c=Object.assign({},this.state.groupForm);c.subscriptionId.value=[],this.setState({subscriptions:s,groupForm:c}),setTimeout((function(){console.log(e.state.subscriptions)}),2e3)}this.props.hideGlobalMessage(),localStorage.setItem("subscriptions",JSON.stringify(s))}else this.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3);setTimeout((function(){d()("select").selectpicker()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerForSubscriptionList),this.timerForSubscriptionList=null}},{key:"getSubscriptionList",value:function(){fetch(this.props.baseUrl+"/listSubscriptions",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(e){200===e.status&&e.json().then((function(e){if("ok"===e.errorStatus.status){var t=e.data;localStorage.setItem("subscriptions",JSON.stringify(t))}else console.log("Subscription list backgroung api error")}))})).catch((function(e){console.log(e),console.log("Subscription list backgroung api error")}))}},{key:"handleFormData",value:function(e){var t=e.target.name,r="checkbox"===e.target.type?e.target.checked:e.target.value,s=Object.assign({},this.state.groupForm);if("subscriptionId"===t){var o=Array.from(e.target.selectedOptions,(function(e){return e.value}));s.subscriptionId.value=o,s.subscriptionId.dirtyState=!0}else"groupId"===t&&(s.groupId.value=r,s.groupId.dirtyState=!0);this.setState({groupForm:s}),this.handleFormValidation()}},{key:"handleFormValidation",value:function(){var e=this.state.groupForm,t=e.subscriptionId.value,r=e.subscriptionId.dirtyState,s=e.groupId.value,n=e.groupId.dirtyState,a=!0,i={};console.log(t);var c,l=!1,u=(0,o.Z)(t);try{for(u.s();!(c=u.n()).done;){var d=c.value;console.log(d),""!==d.trim()&&(l=!0)}}catch(p){u.e(p)}finally{u.f()}l||(r&&(i.subscriptionId="Please select Subscription ID"),a=!1),""===s.trim()&&(n&&(i.groupId="Please enter Group ID"),a=!1),this.setState({groupFormIsValid:a,errorsGroupForm:i})}},{key:"createGroup",value:function(){var e=this;this.props.showGlobalMessage(!1,!0,"Record saving initiated. Please check after some time.","custom-success");var t=Object.assign({},this.state.groupForm),r={};r.subscriptionId=t.subscriptionId.value,r.groupId=t.groupId.value,r.parent="f894e5a8-0f9b-46ca-8b74-57e94610d731",r.name="GroupName",fetch(this.props.baseUrl+this.state.keyName,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken},body:JSON.stringify(r)}).then((function(t){200===t.status?t.json().then((function(t){e.props.showGlobalMessage(!0,!0,t.errorStatus.statusMsg,"custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3);var o=JSON.parse(sessionStorage.getItem("newlyCreatedGroups")),n=o.findIndex((function(e){return e.subscriptionId===r.subscriptionId})),a=(0,s.Z)(o[n].createdData),i=a.findIndex((function(e){return e.groupId===r.groupId}));a.splice(i,1),o[n].createdData=a,sessionStorage.setItem("newlyCreatedGroups",JSON.stringify(o))})):(e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3))})).catch((function(t){console.log(t),e.props.showGlobalMessage(!0,!0,"Please try after sometime","custom-danger"),setTimeout((function(){e.props.hideGlobalMessage()}),2e3)}))}},{key:"render",value:function(){var e=this;return(0,m.jsx)("div",{className:"row Groupcreate",children:(0,m.jsx)("div",{className:"col-md-12 mt-2",children:(0,m.jsx)("div",{className:"centered-div",children:(0,m.jsxs)("div",{className:"centered-div-header",children:[(0,m.jsx)("div",{className:"row maintainagentcreate-header",children:(0,m.jsx)("div",{className:"col-md-12",children:(0,m.jsxs)("h6",{id:"maintaingroupcreate-title",children:["Create Group ",(0,m.jsx)("small",{children:"Creating parameters."})]})})}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"changeable-form group-form",children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-sm-6",children:[(0,m.jsxs)("div",{className:"col-sm-12 label required",children:["License ",(0,m.jsx)("img",{alt:"down-arrow",src:p.Z})]}),(0,m.jsxs)("div",{className:"col-sm-12 mb-2",children:[(0,m.jsx)("select",{className:"selectpickerform-control form-control-sm","data-live-search":"true",name:"subscriptionId",onChange:function(t){e.handleFormData(t)},children:this.state.subscriptions.map((function(e,t){return(0,m.jsx)("option",{value:e.licenseId,children:e.licenseId},"subscriptionOption"+t)}))}),(0,m.jsx)("small",{className:"text-danger",children:this.state.errorsGroupForm.subscriptionId})]})]}),(0,m.jsxs)("div",{className:"col-sm-6",children:[(0,m.jsxs)("div",{className:"col-sm-12 label required",children:["Group ID ",(0,m.jsx)("img",{alt:"down-arrow",src:p.Z})]}),(0,m.jsxs)("div",{className:"col-sm-12 mb-2",children:[(0,m.jsx)("input",{type:"text",className:"form-control form-control-sm",name:"groupId",value:this.state.groupForm.groupId.value,onChange:function(t){e.handleFormData(t)}}),(0,m.jsx)("small",{className:"text-danger",children:this.state.errorsGroupForm.groupId})]})]})]}),(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-sm-12 mb-2 text-right",children:(0,m.jsx)("button",{id:"create-group-btn",disabled:!this.state.groupFormIsValid,onClick:this.createGroup.bind(this),className:"btn btn-sm customize-view-btn",children:"CREATE GROUP"})})})]})]})})})})}}]),r}(l.Component)},907:function(e,t,r){function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}r.d(t,{Z:function(){return s}})},7762:function(e,t,r){r.d(t,{Z:function(){return o}});var s=r(181);function o(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=(0,s.Z)(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}},2982:function(e,t,r){r.d(t,{Z:function(){return n}});var s=r(907);var o=r(181);function n(e){return function(e){if(Array.isArray(e))return(0,s.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,r){r.d(t,{Z:function(){return o}});var s=r(907);function o(e,t){if(e){if("string"===typeof e)return(0,s.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,s.Z)(e,t):void 0}}}}]);
//# sourceMappingURL=88.0970efca.chunk.js.map