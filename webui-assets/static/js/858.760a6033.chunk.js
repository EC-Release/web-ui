"use strict";(self.webpackChunkec_admin_webui=self.webpackChunkec_admin_webui||[]).push([[858],{9003:function(e,t,i){i(2791);t.Z=i.p+"static/media/icon_arrowmore.7bff65e9afad56dab17d2d39fe214905.svg"},9858:function(e,t,i){i.r(t),i.d(t,{default:function(){return T}});var a=i(5671),l=i(3144),s=i(9340),r=i(5716),n=i(2791),o=i(8890),d=i.n(o),c=i(2982),h=i(7762),u=i(184),p=function(e){(0,s.Z)(i,e);var t=(0,r.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){if(e.props.treeValue.length>0){var t=e.props.treeValue[0].id,i=document.getElementById("parentTreeNodeAnchor"+t);null!==i&&i.click()}}),2)}},{key:"componentDidUpdate",value:function(){}},{key:"handleGenerateTreeList",value:function(e,t){var i=this;return e.children?(0,u.jsxs)("li",{children:[(0,u.jsxs)("a",{id:"parentTreeNodeAnchor"+e.id,onClick:this.props.changeTopology.bind(this,e),title:e.title,"data-toggle":"collapse","aria-expanded":"false",href:"#childTreeNodeAnchor"+e.id,children:["\xa0",e.value]}),(0,u.jsx)("ul",{id:"childTreeNodeAnchor"+e.id,className:"collapse",children:e.children.map((function(e,t){return i.handleGenerateTreeList(e,t)}))})]},e.id):(0,u.jsx)("li",{title:e.title,children:e.value},e.id)}},{key:"render",value:function(){var e=this;return(0,u.jsx)("ul",{id:"treeList",children:this.props.treeValue.length>0?this.props.treeValue.map((function(t,i){return e.handleGenerateTreeList(t,i)})):(0,u.jsx)("li",{children:"No record"})})}}]),i}(n.Component),v=i(3289),f=function(e){(0,s.Z)(i,e);var t=(0,r.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){this.generateTopology(this.props.nodeData)}},{key:"componentDidUpdate",value:function(){this.generateTopology(this.props.nodeData)}},{key:"generateTopology",value:function(e){new v.Network(this.refs.myRef,e,{height:"280px"}).moveTo({position:{x:0,y:0},offset:{x:-200,y:-140},scale:1})}},{key:"render",value:function(){return(0,u.jsx)("div",{className:"Topologygraph",id:"topologygraph",children:(0,u.jsx)("div",{ref:"myRef"})})}}]),i}(n.Component),m=i(2157),g=i(9003),b=function(e){(0,s.Z)(i,e);var t=(0,r.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return(0,u.jsxs)("table",{className:"table ",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:this.props.tableData.thead.map((function(e,t){return(0,u.jsx)("th",{children:e.fieldName},"viewTableThead_"+t)}))})}),(0,u.jsx)("tbody",{children:this.props.tableData.tbody.map((function(t,i){return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)("tr",{"data-toggle":"collapse","data-target":"#collapseme"+i,role:"row",className:"parent-row",children:e.props.tableData.thead.map((function(a,l){return(0,u.jsxs)("td",{children:[t[l].value," \xa0\xa0",t[l].hiddenValue&&""!==t[l].hiddenValue&&t[l].hiddenState?(0,u.jsx)("img",{onClick:e.props.showHideTableTdData.bind(e,i,l),className:"icon-arrowmore",alt:"td-detail",src:g.Z}):null]},"viewTableTbodyTd_"+l)}))}),(0,u.jsx)("tr",{id:"collapseme"+i,className:"collapse out",children:(0,u.jsx)("td",{colSpan:"8",children:(0,u.jsx)("div",{children:(0,u.jsx)(m.default,{userId:e.props.userId,showGlobalMessage:e.props.showGlobalMessage.bind(e),hideGlobalMessage:e.props.hideGlobalMessage.bind(e),tableindx:i,permissions:e.props.permissions})})})})]},"viewTableTbodyTr_"+i)}))})]})}}]),i}(n.Component),y=i(4942);var w=i.p+"static/media/x_button.2d5eb181729789db16b3ec5cb06b3e4f.svg";var x=i.p+"static/media/leftarrowbutton.d0d0d8f1dc0af404995b76ff2dd6acf4.svg";var j=i.p+"static/media/rightarrowbutton.189462e6390af47a1fc7d0685fd815c0.svg",F=function(e){(0,s.Z)(i,e);var t=(0,r.Z)(i);function i(e){var l;return(0,a.Z)(this,i),(l=t.call(this,e)).state={allStateFields:[],availableFields:[],filteredAvailableFields:[],selectedFields:[],filteredSelectedFields:[],clickedFilteredAvailableFieldIndex:"",clickedFilteredSelectedFieldIndex:"",whereCondition:[],whereOperator:[],formDatas:[],finalFormDatas:[],isFormValid:!0,isDisableCreateViewButton:!1},l}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){var e,t=(0,c.Z)(this.props.allFields),i=(0,c.Z)(this.props.selectedFields),a=[{condition:"AND",label:"AND"},{condition:"OR",label:"OR"}],l=[{operator:"=",label:"="},{operator:">",label:">"},{operator:"<",label:"<"},{operator:"!=",label:"!="}],s=[{whereCondition:a[0].condition,whereField:t[0].fieldId,whereOperator:l[0].operator,whereValue:"",whereValueError:""}],r=t,n=(0,h.Z)(i);try{var o=function(){var t=e.value;r=r.filter((function(e){return e.fieldId!==t.fieldId}))};for(n.s();!(e=n.n()).done;)o()}catch(d){n.e(d)}finally{n.f()}this.setState({allStateFields:t,availableFields:r,filteredAvailableFields:r,selectedFields:i,filteredSelectedFields:i,whereCondition:a,whereOperator:l,formDatas:s})}},{key:"handleAvailableFieldSelect",value:function(e){this.setState({clickedFilteredAvailableFieldIndex:e,clickedFilteredSelectedFieldIndex:""})}},{key:"handleSelectedFieldSelect",value:function(e){this.setState({clickedFilteredSelectedFieldIndex:e,clickedFilteredAvailableFieldIndex:""})}},{key:"filterBy",value:function(e,t){var i=t.toLowerCase();return function(e){return Object.keys(e).some((function(t){return-1!==e[t].toLowerCase().indexOf(i)}))}}},{key:"removeObject",value:function(e,t,i){for(var a=0;a<e.length;a++)e[a][t]===i&&e.splice(a,1);return e}},{key:"availableFieldsSerach",value:function(e){var t=e.target.value.trim(),i=[];""!==t?i=(0,c.Z)(this.state.availableFields).filter(this.filterBy("fieldName",t)):i=(0,c.Z)(this.state.availableFields);this.setState({filteredAvailableFields:i,clickedFilteredAvailableFieldIndex:""})}},{key:"handleMoveInSelected",value:function(){var e=this.state.clickedFilteredAvailableFieldIndex;if(""!==e){var t=(0,c.Z)(this.state.availableFields),i=(0,c.Z)(this.state.filteredAvailableFields),a=(0,c.Z)(this.state.selectedFields),l=(0,c.Z)(this.state.filteredSelectedFields),s=i[e],r=!1;i.splice(e,1),t=this.removeObject(t,"fieldId",s.fieldId),a.push(s),l.push(s),0===a.length&&(r=!0),this.setState({availableFields:t,filteredAvailableFields:i,selectedFields:a,filteredSelectedFields:l,clickedFilteredAvailableFieldIndex:"",isDisableCreateViewButton:r})}}},{key:"selectedFieldsSerach",value:function(e){var t=e.target.value.trim(),i=[];""!==t?i=(0,c.Z)(this.state.selectedFields).filter(this.filterBy("fieldName",t)):i=(0,c.Z)(this.state.selectedFields);this.setState({filteredSelectedFields:i,clickedFilteredSelectedFieldIndex:""})}},{key:"handleMoveInAvailable",value:function(){var e=this.state.clickedFilteredSelectedFieldIndex;if(""!==e){var t=(0,c.Z)(this.state.selectedFields),i=(0,c.Z)(this.state.filteredSelectedFields),a=(0,c.Z)(this.state.availableFields),l=(0,c.Z)(this.state.filteredAvailableFields),s=i[e],r=!1;i.splice(e,1),t=this.removeObject(t,"fieldId",s.fieldId),a.push(s),l.push(s),0===t.length&&(r=!0),this.setState({selectedFields:t,filteredSelectedFields:i,availableFields:a,filteredAvailableFields:l,clickedFilteredSelectedFieldIndex:"",isDisableCreateViewButton:r})}}},{key:"addNewFilter",value:function(){var e=this,t=(0,c.Z)(this.state.formDatas),i={whereCondition:this.state.whereCondition[0].condition,whereField:this.state.allStateFields[0].fieldId,whereOperator:this.state.whereOperator[0].operator,whereValue:"",whereValueError:""};t.push(i),this.setState({formDatas:t}),setTimeout((function(){e.formValidation("inline")}),500)}},{key:"removeFormRow",value:function(e){var t=this,i=(0,c.Z)(this.state.formDatas);i.splice(e,1),this.setState({formDatas:i}),setTimeout((function(){t.formValidation("inline")}),500)}},{key:"formValidation",value:function(e){var t=!0,i=(0,c.Z)(this.state.formDatas);for(var a in i){""===i[a].whereValue.trim()&&("inline"!==e&&(i[a].whereValueError="Please enter value"),t=!1)}0===i.length&&(t=!1),this.setState({formDatas:i,isFormValid:t})}},{key:"changeFormValue",value:function(e,t){var i=e.target.name,a=e.target.value,l=(0,c.Z)(this.state.formDatas);"whereValue"===i?(l[t].whereValue=a,a=a.trim(),l[t].whereValueError=""===a?"Please enter value":""):"whereCondition"===i?l[t].whereCondition=a:"whereField"===i?l[t].whereField=a:"whereOperator"===i&&(l[t].whereOperator=a),this.setState({formDatas:l}),this.formValidation("inline")}},{key:"applyFilter",value:function(){this.setState({finalFormDatas:(0,c.Z)(this.state.formDatas)}),this.props.showGlobalMessage(!1,!0,"Filter applied successfully","custom-success");var e=this;setTimeout((function(){e.props.hideGlobalMessage(),e.props.createView(e.state.selectedFields,e.state.finalFormDatas)}),2e3)}},{key:"resetFilter",value:function(){var e=[{whereCondition:this.state.whereCondition[0].condition,whereField:this.state.allStateFields[0].fieldId,whereOperator:this.state.whereOperator[0].operator,whereValue:"",whereValueError:""}];this.setState({formDatas:e,finalFormDatas:[],isFormValid:!0})}},{key:"render",value:function(){var e=this;return(0,u.jsxs)("div",{className:"Customsearch",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-sm-6 vdivide",children:[(0,u.jsx)("div",{className:"centered-div-header",children:(0,u.jsxs)("div",{className:"row view-header",children:[(0,u.jsx)("div",{className:"col-sm-8",children:(0,u.jsxs)("h6",{children:["Search Criteria ",(0,u.jsx)("small",{children:"Search parameters"})]})}),(0,u.jsx)("div",{className:"col-sm-4",children:"\xa0"})]})}),(0,u.jsx)("hr",{}),(0,u.jsxs)("div",{className:"search-form",children:[this.state.formDatas.map((function(t,i){return(0,u.jsxs)("div",{children:[0!==i?(0,u.jsx)("div",{className:"row mb-2",children:(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("select",{onChange:function(t){e.changeFormValue(t,i)},className:"form-control",id:"whereCondition"+i,name:"whereCondition",value:t.whereCondition,children:e.state.whereCondition.map((function(e,t){return(0,u.jsx)("option",{value:e.condition,children:e.label},"whereConditionOption"+i+t)}))})})}):null,(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsx)("div",{className:"col-sm-4",children:(0,u.jsx)("select",{onChange:function(t){e.changeFormValue(t,i)},value:t.whereField,className:"form-control",id:"whereField"+i,name:"whereField",children:e.state.allStateFields.map((function(e,t){return(0,u.jsx)("option",{value:e.fieldId,children:e.fieldName},"whereFieldOption"+i+t)}))})}),(0,u.jsx)("div",{className:"col-sm-3",children:(0,u.jsx)("select",{onChange:function(t){e.changeFormValue(t,i)},value:t.whereOperator,className:"form-control",id:"whereOperator"+i,name:"whereOperator",children:e.state.whereOperator.map((function(e,t){return(0,u.jsx)("option",{value:e.operator,children:e.label},"whereOperatorOption"+i+t)}))})}),(0,u.jsxs)("div",{className:"col-sm-4",children:[(0,u.jsx)("input",{onChange:function(t){e.changeFormValue(t,i)},value:t.whereValue,type:"text",className:"form-control",name:"whereValue",autoComplete:"off"}),(0,u.jsx)("small",{className:"text-danger",children:""!==t.whereValueError?t.whereValueError:""})]}),(0,u.jsx)("div",{className:"col-sm-1",children:(0,u.jsx)("img",{onClick:e.removeFormRow.bind(e,i),className:"remove-row",alt:"remove-row",src:w})})]})]},"form-row"+i)})),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("button",{onClick:this.addNewFilter.bind(this),className:"btn btn-sm float-left customize-view-btn",children:"ADD FILTER"})})}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("span",{className:"float-right",children:(0,u.jsx)("button",{onClick:this.resetFilter.bind(this),className:"btn btn-sm customize-reset-btn ml-2",children:"RESET"})})})})]})]}),(0,u.jsx)("div",{className:"col-sm-6 view-selection-panel",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-sm-5",children:[(0,u.jsx)("h6",{children:(0,u.jsx)("small",{children:"AVAILABLE FIELDS"})}),(0,u.jsx)("div",{className:"pre-scrollable",children:(0,u.jsxs)("div",{className:"list-group",children:[(0,u.jsx)("input",{type:"text",onChange:function(t){e.availableFieldsSerach(t)},className:"form-control",placeholder:"Search"}),this.state.filteredAvailableFields.map((function(t,i){var a;return(0,u.jsx)("a",(a={href:"#",onClick:e.handleAvailableFieldSelect.bind(e,i)},(0,y.Z)(a,"href","#"),(0,y.Z)(a,"className",e.state.clickedFilteredAvailableFieldIndex===i?"list-group-item list-group-item-action active":"list-group-item list-group-item-action"),(0,y.Z)(a,"children",t.fieldName),a),"availableFieldAnchorKey"+i)}))]})})]}),(0,u.jsxs)("div",{className:"col-sm-2 selection-button-div",children:[(0,u.jsx)("img",{onClick:this.handleMoveInAvailable.bind(this),className:"mx-auto d-block",alt:"view-field-selection",src:x}),(0,u.jsx)("img",{onClick:this.handleMoveInSelected.bind(this),className:"mx-auto d-block",alt:"view-field-selection",src:j})]}),(0,u.jsxs)("div",{className:"col-sm-5",children:[(0,u.jsx)("h6",{children:(0,u.jsx)("small",{children:"SELECTED FIELDS"})}),(0,u.jsx)("div",{className:"pre-scrollable",children:(0,u.jsxs)("div",{className:"list-group",children:[(0,u.jsx)("input",{type:"text",onChange:function(t){e.selectedFieldsSerach(t)},className:"form-control",placeholder:"Search"}),this.state.selectedFields.length>0?this.state.filteredSelectedFields.map((function(t,i){var a;return(0,u.jsx)("a",(a={href:"#",onClick:e.handleSelectedFieldSelect.bind(e,i)},(0,y.Z)(a,"href","#"),(0,y.Z)(a,"className",e.state.clickedFilteredSelectedFieldIndex===i?"list-group-item list-group-item-action active":"list-group-item list-group-item-action"),(0,y.Z)(a,"children",t.fieldName),a),"selectedFieldAnchorKey"+i)})):(0,u.jsx)("li",{className:"list-group-item list-group-item-danger",children:"Please select fields"})]})})]})]})})]}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("button",{disabled:!(this.state.isFormValid&&!this.state.isDisableCreateViewButton),onClick:this.applyFilter.bind(this),className:"btn btn-sm customize-view-btn",children:"CREATE VIEW"})})})]})}}]),i}(n.Component);var I=i.p+"static/media/refresh.4a390c6a8519c68d698927fe20aec23f.svg",S=function(e){(0,s.Z)(i,e);var t=(0,r.Z)(i);function i(e){var l;return(0,a.Z)(this,i),(l=t.call(this,e)).state={treeValue:[],graph:{nodes:[],edges:[]},loadTreeJs:!1,centerNodeColor:"#ff0000",nodeShapes:["ellipse","circle","box"],apiLoadPercentage:0,mockTableData:[],table:{thead:[],tbody:[]},allFields:[],isSearchView:!1},l}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){var e=this,t=[{id:1,value:"group-101",color:"#57F518",children:[{id:2,value:"Gateway-104",color:"#8FF4FF",children:[{id:3,value:"Wabtec-gecars-qa client",color:"#C98FFF",edgeLabel:"Group 101"},{id:4,value:" Wabtec-gecars-qa server",color:"#C98FFF",edgeLabel:"Group 101"},{id:5,value:"wabtec-gecars-ta client",color:"#45C7FF",edgeLabel:"Group 101"},{id:6,value:"wabtec-gecars-ta server",color:"#45C7FF",edgeLabel:"Group 101"}]},{id:7,value:"Gateway-101",color:"#8FF4FF",children:[{id:8,value:"wabtec-gecorp-qa client",color:"#C98FFF",edgeLabel:"Group 101"},{id:9,value:"wabtec-gecorp-qa server",color:"#C98FFF",edgeLabel:"Group 101"},{id:10,value:"wabtec-gecorp-dev client",color:"#45C7FF",edgeLabel:"Group 101"},{id:11,value:"wabtec-gecorp-dev server",color:"#45C7FF",edgeLabel:"Group 101"}]}]},{id:12,value:"group-102",x:200,y:100,children:[{id:13,value:"Gateway-102",children:[{id:14,value:"Client-01",color:"#C98FFF",edgeLabel:"Group 102"},{id:15,value:"Server-01",color:"#C98FFF",edgeLabel:"Group 102"},{id:16,value:"Client-02",color:"#45C7FF",edgeLabel:"Group 102"},{id:17,value:"Server-02",color:"#45C7FF",edgeLabel:"Group 102"}]},{id:21,value:"Gateway-103",children:[{id:22,value:"Client-01",color:"#C98FFF",edgeLabel:"Group 102"},{id:23,value:"Server-01",color:"#C98FFF",edgeLabel:"Group 102"}]}]}];if(sessionStorage.setItem("graphData",JSON.stringify(t)),null===localStorage.getItem("treeValue")||null===localStorage.getItem("technicalTableData")){var i=[],a=0;fetch(this.props.baseUrl+"snapshot",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(l){200===l.status&&l.json().then((function(l){if("ok"===(l={errorStatus:{status:"ok"},data:[{listdata:[{groupName:"wabtec-gecars-qa",items:[{groupId:"wabtec-gecars-qa",sessionId:"0idLmsMk8e"},{groupId:"wabtec-gecars-qa",sessionId:"0idLmsMk8t"}]},{groupName:"wabtec-gecars-ba",items:[{groupId:"wabtec-gecars-ba",sessionId:"0idLmsMk8e"},{groupId:"wabtec-gecars-ba",sessionId:"0idLmsMk8f"}]}]}]}).errorStatus.status){var s=l.data;if(null!==s)!function(){t[0].value=t[0].value+" ("+s.length+")",0===s.length&&(s=[]);var l=s.length,r=s.length,n=0;if(0===l){var o=e;setTimeout((function(){o.setState({loadTreeJs:!0}),console.log("subscriptions")}),1e3)}a=Math.round(n/r*100),e.setState({apiLoadPercentage:a});var d=t[0].id,c=function(l){var o=s[l].listdata[l].items[l].groupId,c=s[l].listdata[l].items[l].groupId;d++;var h={};h.id=d,h.title=c;var u=c;c.length>20&&(u=c.substr(0,5)+"..."+c.substr(c.length-5,5));h.value=u,h.nodeType="subscription",0===l?t[0].children=[h]:t[0].children.push(h),""!==o?fetch("https://reqres.in/api/users/2",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.props.authToken}}).then((function(s){200===s.status&&(n++,a=Math.round(n/r*100),e.setState({apiLoadPercentage:a}),s.json().then((function(s){if("ok"===(s={errorStatus:{status:"ok"},data:{glist:[{suidbscriptionId:2323,subscrititleptionName:"abc",cfURL:"https://reqres.in/api/users/2",children:""},{id:6754,title:"uytut",cfURL:"https://reqres.in/api/users/2",children:""}]}}).errorStatus.status){var o=s.data.glist,h=Object.keys(o).length;r+=h,a=Math.round(n/r*100),e.setState({apiLoadPercentage:a}),t[0].children[l].value=t[0].children[l].value+" ("+h+")";var u=function(s){d++;var h={};h.id=d,h.title=o[s].cfURL;var u=o[s].cfURL,p=u.indexOf("://")+3,v=u.indexOf("."),f=u.slice(p,v),m=f;if(f>30){var g=f.substr(0,10),b=f.substr(f.length-10,10);f=g+"..."+b}h.value=f,h.nodeType="gateway",0===s.split(":")[1]&&(t[0].children[l].children=[h]),fetch("https://reqres.in/api/users/2",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.props.authToken}}).then((function(o){200===o.status&&o.json().then((function(o){if(o={errorStatus:{status:"ok"},data:{SuperConns:{serverId:23},ClientPool:[{bindId:3432}],Sessions:[{clientConfig:{groupId:53435}}]}},n++,a=Math.round(n/r*100),e.setState({apiLoadPercentage:a}),"ok"===o.errorStatus.status){var h=o.data.ClientPool,u=[],p={},v=o.data.SuperConns,f=[],g={},b=o.data.Sessions,y=[],w=[],x={};for(var j in b){var F={};F.sessionId=j,F.groupId=b[j].clientConfig.groupId,y.push(F)}if(h.length>0&&(h.forEach((function(e){p[e.bindId]=(p[e.bindId]||0)+1})),u=e.removeDuplicates(h,"bindId")),u.length>0)for(var I in d++,u){d++;var S={};S.id=d;var N=[{clientConfig:{groupId:2424,id:121}}];S.title=N[I].clientConfig.groupId+"\n ["+N[I].clientConfig.id+"] ("+p[N[I].clientConfig.id]+")";var T=N[I].clientConfig.groupId+"\n ["+N[I].clientConfig.id+"] ("+p[N[I].clientConfig.id]+")";S.value=T,S.nodeType="clientpool";var C={};C.subscription_name=c,C.gateway=m,C.group_id=N[I].clientConfig.groupId,C.count=p[N[I].clientConfig.id],C.type="clientpool",i.push(C)}if(v.length>0&&(v.forEach((function(e){g[e.serverId]=(g[e.serverId]||0)+1})),f=e.removeDuplicates(v,"serverId")),f.length>0){for(var k in d++,t[0].children[l].children[s.split(":")[1]].children?t[0].children[l].children[s.split(":")[1]].children.push({id:d,value:"Super Connections ("+v.length+")",title:"Super Connections",nodeType:"superconnectiontitle"}):t[0].children[l].children[s.split(":")[1]].children=[{id:d,value:"Super Connections ("+v.length+")",title:"Super Connections",nodeType:"superconnectiontitle"}],f){d++;var V={};V.id=d,V.title=f[k].bindId.groupId+"\n ["+f[k].bindId.id+"] ("+g[f[k].bindId.id]+")";var D=f[k].bindId.groupId+"\n ["+f[k].bindId.id+"] ("+g[f[k].bindId.id]+")";V.value=D,V.nodeType="superconnection",0===k?"Client Pools"===t[0].children[l].children[s.split(":")[1]].children[0].title?t[0].children[l].children[s.split(":")[1]].children[1].children=[V]:t[0].children[l].children[s.split(":")[1]].children[0].children=[V]:"Client Pools"===t[0].children[l].children[s.split(":")[1]].children[0].title?t[0].children[l].children[s.split(":")[1]].children[1].children.push(V):t[0].children[l].children[s.split(":")[1]].children[0].children.push(V);var Z={};Z.subscription_name=c,Z.gateway=m,Z.group_id=f[k].bindId.groupId,Z.count=g[f[k].bindId.id],Z.type="superconnection",i.push(Z)}if(y.length>0&&(y.forEach((function(e){x[e.groupId]=(x[e.groupId]||0)+1})),w=e.removeDuplicates(y,"groupId")),w.length>0){d++,t[0].children[l].children[s.split(":")[1]].children?t[0].children[l].children[s.split(":")[1]].children.push({id:d,value:"Sessions ("+y.length+")",title:"Sessions",nodeType:"sessiontitle"}):t[0].children[l].children[s.split(":")[1]].children=[{id:d,value:"Sessions ("+y.length+")",title:"Sessions",nodeType:"sessiontitle"}];var L=t[0].children[l].children[s.split(":")[1]].children.length-1;for(var O in w){d++;var G={};G.id=d,G.title=w[O].groupId+"("+x[w[O].groupId]+")";var A=w[O].groupId+"("+x[w[O].groupId]+")";G.value=A,G.nodeType="session",0===O?t[0].children[l].children[s.split(":")[1]].children[L].children=[G]:t[0].children[l].children[s.split(":")[1]].children[L].children.push(G);var M={};M.subscription_name=c,M.gateway=m,M.group_id=w[O].groupId,M.count=x[w[O].groupId],M.type="session",i.push(M)}}}}if(n===r){e.generateTableStructure(i),localStorage.setItem("technicalTableData",JSON.stringify(i)),localStorage.setItem("treeValue",JSON.stringify(t));var E=e;setTimeout((function(){E.setState({mockTableData:i,loadTreeJs:!0})}),2e3)}}))}))};for(var p in o)u(p)}else t[0].children[l].value=t[0].children[l].value+" (0)";if(n===r){var v=e;setTimeout((function(){v.setState({loadTreeJs:!0}),console.log("gateways")}),2e3)}})))})):(n++,a=Math.round(n/r*100),e.setState({apiLoadPercentage:a}))};for(var u in s)c(u);var p=[],v=[];if(t.length>0){var f=t[0];console.log(t[0]);var m={id:f.id,label:f.value,title:f.value,color:f.color,shape:"ellipse"};if(p.push(m),f.children){var g,b=(0,h.Z)(f.children);try{for(b.s();!(g=b.n()).done;){var y=g.value,w=y.id,x=y.value,j=y.title,F=y.color,I=y.edgeLabel,S="box";"subscription"===y.nodeType||"superconnectiontitle"===y.nodeType||"clientpooltitle"===y.nodeType||"sessiontitle"===y.nodeType?S="circle":"clientpool"===y.nodeType&&(S="ellipse");var N={id:w,label:x,title:j,shape:S,color:F};p.push(N);var T={from:1,to:w,label:I,color:F};v.push(T)}}catch(C){b.e(C)}finally{b.f()}}}e.setState({treeValue:t,graph:{nodes:p,edges:v}})}();else{e.setState({table:{thead:[{fieldId:"subscription_name",fieldName:"Subscription Name"},{fieldId:"gateway",fieldName:"Gateway"},{fieldId:"group_id",fieldName:"Group Id"},{fieldId:"count",fieldName:"Count"},{fieldId:"type",fieldName:"Type"}],tbody:[]},allFields:[]}),setTimeout((function(){e.setState({treeValue:[],graph:{nodes:[],edges:[]},apiLoadPercentage:100,loadTreeJs:!0})}),2e3)}}}))}))}else this.displayDataFromLocalStorage()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"displayDataFromLocalStorage",value:function(){var e=this,t=[],i=[],a=JSON.parse(sessionStorage.getItem("graphData")),l=JSON.parse(localStorage.getItem("technicalTableData"));if(this.setState({mockTableData:l}),this.generateTableStructure(l),a.length>0){var s=a[0];console.log(s);var r={id:s.id,label:s.value,title:s.value,color:s.color,shape:"ellipse"};if(t.push(r),s.children){var n,o=(0,h.Z)(s.children);try{for(o.s();!(n=o.n()).done;){var d=n.value,c=d.id,u=d.value,p=d.title,v=d.color,f=d.edgeLabel,m="box";"subscription"===d.nodeType||"superconnectiontitle"===d.nodeType||"clientpooltitle"===d.nodeType||"sessiontitle"===d.nodeType?m="circle":"clientpool"===d.nodeType&&(m="ellipse");var g={id:c,label:u,title:p,shape:m,color:v};t.push(g);var b={from:1,to:c,label:f,color:v};i.push(b)}}catch(y){o.e(y)}finally{o.f()}}}this.setState({treeValue:a,graph:{nodes:t,edges:i},apiLoadPercentage:99}),setTimeout((function(){e.setState({apiLoadPercentage:100,loadTreeJs:!0}),console.log("from LS")}),1e3)}},{key:"getItems",value:function(){var e=this,t=[],i=[{id:1,value:"EC",title:"EC",nodeType:"root"}];fetch(this.props.baseUrl+"/listSubscriptions",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.props.authToken}}).then((function(a){200===a.status&&a.json().then((function(a){if("ok"===a.errorStatus.status){var l=a.data;null!==l&&function(){i[0].value=i[0].value+" ("+l.length+")",0===l.length&&(l=[]);var a=l.length,s=l.length,r=0;0===a&&(localStorage.setItem("technicalTableData",JSON.stringify(t)),localStorage.setItem("treeValue",JSON.stringify(i)),e.setState({mockTableData:t}));var n=i[0].id,o=function(a){var o=l[a].subscriptionId.trim(),d=l[a].subscriptionName.trim();n++;var c={};c.id=n,c.title=d;var h=d;d.length>20&&(h=d.substr(0,5)+"..."+d.substr(d.length-5,5));c.value=h,c.nodeType="subscription",0===a?i[0].children=[c]:i[0].children.push(c),""!==o?fetch(e.props.baseUrl+"/gatewayList?subscriptionID="+o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.props.authToken}}).then((function(l){200===l.status&&(r++,l.json().then((function(l){if("ok"===l.errorStatus.status){var o=l.data.glist,c=Object.keys(o).length;s+=c,i[0].children[a].value=i[0].children[a].value+" ("+c+")";var h=function(l){n++;var c={};c.id=n,c.title=o[l].cfURL;var h=o[l].cfURL,u=h.indexOf("://")+3,p=h.indexOf("."),v=h.slice(u,p),f=v;if(v>30){var m=v.substr(0,10),g=v.substr(v.length-10,10);v=m+"..."+g}c.value=v,c.nodeType="gateway",0===l.split(":")[1]?i[0].children[a].children=[c]:i[0].children[a].children.push(c),fetch(e.props.baseUrl+"/getGatewayHealth?gatewayURL="+o[l].cfURL,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.props.authToken}}).then((function(o){200===o.status&&o.json().then((function(o){if(r++,"ok"===o.errorStatus.status){var c=o.data.ClientPool,h=[],u={},p=o.data.SuperConns,v=[],m={},g=o.data.Sessions,b=[],y=[],w={};for(var x in g){var j={};j.sessionId=x,j.groupId=g[x].clientConfig.groupId,b.push(j)}if(c.length>0&&(c.forEach((function(e){u[e.bindId]=(u[e.bindId]||0)+1})),h=e.removeDuplicates(c,"bindId")),h.length>0)for(var F in n++,i[0].children[a].children[l.split(":")[1]].children=[{id:n,value:"Client Pools ("+c.length+")",title:"Client Pools",nodeType:"clientpooltitle"}],h){n++;var I={};I.id=n,I.title=h[F].clientConfig.groupId+"\n ["+h[F].clientConfig.id+"] ("+u[h[F].clientConfig.id]+")";var S=h[F].clientConfig.groupId+"\n ["+h[F].clientConfig.id+"] ("+u[h[F].clientConfig.id]+")";I.value=S,I.nodeType="clientpool",0===F?i[0].children[a].children[l.split(":")[1]].children[0].children=[I]:i[0].children[a].children[l.split(":")[1]].children[0].children.push(I);var N={};N.subscription_name=d,N.gateway=f,N.group_id=h[F].clientConfig.groupId,N.count=u[h[F].clientConfig.id],N.type="clientpool",t.push(N)}if(p.length>0&&(p.forEach((function(e){m[e.serverId]=(m[e.serverId]||0)+1})),v=e.removeDuplicates(p,"serverId")),v.length>0){for(var T in n++,i[0].children[a].children[l.split(":")[1]].children?i[0].children[a].children[l.split(":")[1]].children.push({id:n,value:"Super Connections ("+p.length+")",title:"Super Connections",nodeType:"superconnectiontitle"}):i[0].children[a].children[l.split(":")[1]].children=[{id:n,value:"Super Connections ("+p.length+")",title:"Super Connections",nodeType:"superconnectiontitle"}],v){n++;var C={};C.id=n,C.title=v[T].bindId.groupId+"\n ["+v[T].bindId.id+"] ("+m[v[T].bindId.id]+")";var k=v[T].bindId.groupId+"\n ["+v[T].bindId.id+"] ("+m[v[T].bindId.id]+")";C.value=k,C.nodeType="superconnection",0===T?"Client Pools"===i[0].children[a].children[l.split(":")[1]].children[0].title?i[0].children[a].children[l.split(":")[1]].children[1].children=[C]:i[0].children[a].children[l.split(":")[1]].children[0].children=[C]:"Client Pools"===i[0].children[a].children[l.split(":")[1]].children[0].title?i[0].children[a].children[l.split(":")[1]].children[1].children.push(C):i[0].children[a].children[l.split(":")[1]].children[0].children.push(C);var V={};V.subscription_name=d,V.gateway=f,V.group_id=v[T].bindId.groupId,V.count=m[v[T].bindId.id],V.type="superconnection",t.push(V)}if(b.length>0&&(b.forEach((function(e){w[e.groupId]=(w[e.groupId]||0)+1})),y=e.removeDuplicates(b,"groupId")),y.length>0){n++,i[0].children[a].children[l.split(":")[1]].children?i[0].children[a].children[l.split(":")[1]].children.push({id:n,value:"Sessions ("+b.length+")",title:"Sessions",nodeType:"sessiontitle"}):i[0].children[a].children[l.split(":")[1]].children=[{id:n,value:"Sessions ("+b.length+")",title:"Sessions",nodeType:"sessiontitle"}];var D=i[0].children[a].children[l.split(":")[1]].children.length-1;for(var Z in y){n++;var L={};L.id=n,L.title=y[Z].groupId+"("+w[y[Z].groupId]+")";var O=y[Z].groupId+"("+w[y[Z].groupId]+")";L.value=O,L.nodeType="session",0===Z?i[0].children[a].children[l.split(":")[1]].children[D].children=[L]:i[0].children[a].children[l.split(":")[1]].children[D].children.push(L);var G={};G.subscription_name=d,G.gateway=f,G.group_id=y[Z].groupId,G.count=w[y[Z].groupId],G.type="session",t.push(G)}}}}r===s&&(localStorage.setItem("technicalTableData",JSON.stringify(t)),localStorage.setItem("treeValue",JSON.stringify(i)),e.setState({mockTableData:t}),console.log("Long Poll data GL"))}))}))};for(var u in o)h(u)}else i[0].children[a].value=i[0].children[a].value+" (0)";r===s&&(localStorage.setItem("technicalTableData",JSON.stringify(t)),localStorage.setItem("treeValue",JSON.stringify(i)),e.setState({mockTableData:t}),console.log("Long Poll data GL NF"))})))})):r++};for(var d in l)o(d)}()}}))}))}},{key:"generateTableStructure",value:function(e){var t=[],i=[],a=[],l=[{gatewayId:"0idLmsMk8e",RefID:"101186260",IP:"10.72.11.10:63218",sessionId:"0idLmsMk8e",groupId:"wabtec-gecars-qa",bindid:"XvmV6ynici",targetId:"Q7rfHI",timeCreated:"2021-02-10T12:11:07.223278039Z",serviceUrl:"https://b3a2e606-eaa8-4d3c-aadc-c27f12260a1b.run.aws-usw02-dev.ice.predix.io"},{gatewayId:"1idLmsBc9x",RefID:"132186260",IP:"10.72.11.10:63317",sessionId:"1idLmsBc9x",groupId:"wabtec-gecars-ta",bindid:"ZcdV6snbci",targetId:"Q7rfHI",timeCreated:"2021-02-10T12:11:07.223278039Z",serviceUrl:"https://b3a2e606-eaa8-4d3c-aadc-c27f12260a1b.run.aws-usw02-dev.ice.predix.io"}],s=l;if(sessionStorage.setItem("gatewayDetails",JSON.stringify(l)),s.length>0){for(var r=Object.keys(s[0]),n=0,o=r;n<o.length;n++){var d=o[n],c={};c.fieldId=d,c.fieldName=this.toTableHeaderCase(d),t.push(c),i.push(c)}var u,p=(0,h.Z)(s);try{for(p.s();!(u=p.n()).done;){var v,f=u.value,m={},g=0,b=(0,h.Z)(r);try{for(b.s();!(v=b.n()).done;){var y=v.value,w={};f[y].length>10?(w.value=f[y].substr(0,10),w.hiddenValue=f[y],w.hiddenState=!0):w.value=f[y],m[g]=w,g++}}catch(x){b.e(x)}finally{b.f()}a.push(m)}}catch(x){p.e(x)}finally{p.f()}}this.setState({table:{thead:t,tbody:a},allFields:i})}},{key:"toTableHeaderCase",value:function(e){return e.split("_").map((function(e,t){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ")}},{key:"showHideTableTdData",value:function(e,t){var i=this.state.table.tbody,a=Object.assign({},i[e][t]),l=a.value;a.value=a.hiddenValue,a.hiddenValue=l,a.hiddenState=!a.hiddenState,i[e][t]=a,this.setState({table:{thead:this.state.table.thead,tbody:i}})}},{key:"changeToSearchView",value:function(){this.setState({isSearchView:!0})}},{key:"changeTopologyView",value:function(e){var t=[],i=[],a=Object.assign({},e),l=a.id,s=a.value,r=a.title,n=a.color,o={};if(o.id=l,o.label=s,o.title=r,o.color=n,o.shape="ellipse",o.color=n,t.push(o),a.children){var d,u=(0,c.Z)(a.children),p=(0,h.Z)(u);try{for(p.s();!(d=p.n()).done;){var v=d.value,f=Object.assign({},v),m=f.id,g=f.value,b=f.title,y=f.nodeType,w=f.color,x=v.edgeLabel,j={};j.id=m,j.label=g,j.title=b;var F="box";"subscription"===y||"superconnectiontitle"===y||"clientpooltitle"===y||"sessiontitle"===y?(F="circle",n="#08cc9efa"):"clientpool"===y?(F="ellipse",n="#e84a4a"):"session"===y&&(F="box",n="#ffc107"),j.shape=F,j.color=w,t.push(j);var I={};I.from=l,I.to=m,I.label=x,I.color=w,i.push(I)}}catch(S){p.e(S)}finally{p.f()}}this.setState({graph:{nodes:t,edges:i}})}},{key:"removeDuplicates",value:function(e,t){return e.filter((function(e,i,a){return a.map((function(e){return e[t]})).indexOf(e[t])===i}))}},{key:"destroyDataTable",value:function(e){d()("#"+e).DataTable().destroy()}},{key:"refreshData",value:function(e){var t=this;if(this.destroyDataTable("viewTable"),this.setState({loadTreeJs:!1,apiLoadPercentage:70}),null!==localStorage.getItem("treeValue")&&null!==localStorage.getItem("technicalTableData"))this.displayDataFromLocalStorage();else{this.setState({table:{thead:[{fieldId:"subscription_name",fieldName:"Subscription Name"},{fieldId:"gateway",fieldName:"Gateway"},{fieldId:"group_id",fieldName:"Group Id"},{fieldId:"count",fieldName:"Count"},{fieldId:"type",fieldName:"Type"}],tbody:[]},allFields:[]}),setTimeout((function(){t.setState({treeValue:[],graph:{nodes:[],edges:[]},apiLoadPercentage:100,loadTreeJs:!0})}),2e3)}}},{key:"createView",value:function(e,t){var i=this,a=(0,c.Z)(this.state.mockTableData);console.log(a);var l,s=a,r=[],n=[],o=(0,h.Z)(t);try{for(o.s();!(l=o.n()).done;){var d=l.value;"AND"===d.whereCondition&&""!==d.whereValue?r.push(d):"OR"===d.whereCondition&&""!==d.whereValue&&n.push(d)}}catch(M){o.e(M)}finally{o.f()}if(r.length>0){var u,p=(0,h.Z)(r);try{var v=function(){var e=u.value;"="===e.whereOperator?s=s.filter((function(t){return t[e.whereField]===e.whereValue})):">"===e.whereOperator?s=s.filter((function(t){return t[e.whereField]>e.whereValue})):"<"===e.whereOperator?s=s.filter((function(t){return t[e.whereField]<e.whereValue})):"!="===e.whereOperator&&(s=s.filter((function(t){return t[e.whereField]!==e.whereValue})))};for(p.s();!(u=p.n()).done;)v()}catch(M){p.e(M)}finally{p.f()}}if(n.length>0){var f,m=[],g=(0,h.Z)(n);try{var b=function(){var e=f.value,t=[],a=(0,c.Z)(i.state.mockTableData);if("="===e.whereOperator?t=a.filter((function(t){return t[e.whereField]===e.whereValue})):">"===e.whereOperator?t=a.filter((function(t){return t[e.whereField]>e.whereValue})):"<"===e.whereOperator?t=a.filter((function(t){return t[e.whereField]<e.whereValue})):"!="===e.whereOperator&&(t=a.filter((function(t){return t[e.whereField]!==e.whereValue}))),t.length>0){var l,s=(0,h.Z)(t);try{for(s.s();!(l=s.n()).done;){var r=l.value;m.push(r)}}catch(M){s.e(M)}finally{s.f()}}};for(g.s();!(f=g.n()).done;)b()}catch(M){g.e(M)}finally{g.f()}if(m.length>0){var y,w=(0,h.Z)(m);try{for(w.s();!(y=w.n()).done;){var x=y.value;s.push(x)}}catch(M){w.e(M)}finally{w.f()}}}if(n.length>0){var j=Object.create(null);s.filter((function(e){var t=["subscription_name","group_id","gateway"].map((function(t){return e[t]})).join("|");if(!j[t])return j[t]=!0,!0}))}else s;var F,I=[],S=[],N=(0,h.Z)(e);try{for(N.s();!(F=N.n()).done;){var T=F.value;I.push(T.fieldId)}}catch(M){N.e(M)}finally{N.f()}var C,k=(0,h.Z)(s);try{for(k.s();!(C=k.n()).done;){var V,D=C.value,Z={},L=0,O=(0,h.Z)(I);try{for(O.s();!(V=O.n()).done;){var G=V.value,A={};D[G].length>10?(A.value=D[G].substr(0,10),A.hiddenValue=D[G],A.hiddenState=!0):A.value=D[G],Z[L]=A,L++}}catch(M){O.e(M)}finally{O.f()}S.push(Z)}}catch(M){k.e(M)}finally{k.f()}this.setState({table:{thead:e,tbody:S},isSearchView:!1})}},{key:"render",value:function(){var e=this;return(0,u.jsx)("div",{children:this.state.isSearchView?(0,u.jsx)(F,{showGlobalMessage:this.props.showGlobalMessage.bind(this),hideGlobalMessage:this.props.hideGlobalMessage.bind(this),allFields:this.state.allFields,selectedFields:this.state.table.thead,createView:this.createView.bind(this)}):(0,u.jsxs)("div",{className:"Technicalview",children:[(0,u.jsxs)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("a",{className:"nav-link active",id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true",children:"Table"})}),(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("a",{className:"nav-link",id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false",children:"Treelist and Topology"})}),(0,u.jsx)("li",{title:"Refresh",className:"nav-item cursor-pointer",onClick:function(t){e.refreshData(t)},children:(0,u.jsx)("a",{className:"nav-link disabled",href:"#",children:(0,u.jsx)("img",{className:"",src:I,alt:"refresh",height:"15px"})})})]}),(0,u.jsxs)("div",{className:"tab-content",id:"myTabContent",children:[(0,u.jsx)("div",{className:"tab-pane fade show active",id:"home",role:"tabpanel","aria-labelledby":"home-tab",children:this.state.loadTreeJs?this.state.table.tbody.length>0?(0,u.jsx)("div",{className:"row view-table",children:(0,u.jsxs)("div",{className:"col-md-12",id:"viewTableDiv",children:[(0,u.jsx)("button",{onClick:this.changeToSearchView.bind(this),className:"btn btn-sm float-right btn-link",children:"Advanced search"}),(0,u.jsx)(b,{tableData:this.state.table,showHideTableTdData:this.showHideTableTdData.bind(this),userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage.bind(this),hideGlobalMessage:this.props.hideGlobalMessage.bind(this),permissions:this.props.permissions})]})}):(0,u.jsx)("div",{className:"row mt-2",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("div",{className:"alert alert-success",role:"alert",children:"No record found!"})})}):(0,u.jsx)("div",{className:"row",children:(0,u.jsxs)("div",{className:"col-md-12 mt-5",children:[(0,u.jsx)("p",{children:"Please wait..."}),(0,u.jsx)("div",{className:"progress",children:(0,u.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:this.state.apiLoadPercentage+"%"}})})]})})}),(0,u.jsx)("div",{className:"tab-pane fade",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab",children:this.state.loadTreeJs?this.state.graph.nodes.length>0&&this.state.treeValue.length>0?(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-4 treeview-div",children:(0,u.jsx)(p,{treeValue:this.state.treeValue,changeTopology:this.changeTopologyView.bind(this)})}),(0,u.jsx)("div",{className:"col-md-8 treeview-div",children:(0,u.jsx)(f,{nodeData:this.state.graph})})]}):(0,u.jsx)("div",{className:"row mt-2",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("div",{className:"alert alert-success",role:"alert",children:"No record found!"})})}):(0,u.jsx)("div",{className:"row",children:(0,u.jsxs)("div",{className:"col-md-12 mt-5",children:[(0,u.jsx)("p",{children:"Please wait..."}),(0,u.jsx)("div",{className:"progress",children:(0,u.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:this.state.apiLoadPercentage+"%"}})})]})})})]})]})})}}]),i}(n.Component),N=function(e){(0,s.Z)(i,e);var t=(0,r.Z)(i);function i(e){var l;return(0,a.Z)(this,i),(l=t.call(this,e)).state={treeValue:[],graph:{nodes:[],edges:[]},options:{layout:{hierarchical:!0},edges:{color:"#000000"},height:"500px"},table:{thead:[],tbody:[]}},l}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){var e=[{id:1,value:"EC",children:[{id:2,value:"Business",children:[{id:7,value:"Aviation",children:[{id:11,value:"Aviation1"},{id:12,value:"Aviation2"},{id:13,value:"Aviation3"}]},{id:8,value:"Power"},{id:9,value:"Capital"},{id:10,value:"External"}]},{id:3,value:"Subscription"},{id:4,value:"Application"},{id:5,value:"Groups"},{id:6,value:"Connection"}]}],t=[],i=[];if(e.length>0){var a=e[0],l={id:a.id,label:a.value};if(t.push(l),a.children){var s,r=(0,h.Z)(a.children);try{for(r.s();!(s=r.n()).done;){var n=s.value,o=n.id,d={id:o,label:n.value};t.push(d);var c={from:1,to:o};i.push(c)}}catch(u){r.e(u)}finally{r.f()}}}this.setState({treeValue:e,graph:{nodes:t,edges:i}})}},{key:"changeTopologyView",value:function(e){var t=[],i=[],a=Object.assign({},e),l=a.id,s=a.value,r={};if(r.id=l,r.label=s,t.push(r),a.children){var n,o=(0,c.Z)(a.children),d=(0,h.Z)(o);try{for(d.s();!(n=d.n()).done;){var u=n.value,p=Object.assign({},u),v=p.id,f=p.value,m={};m.id=v,m.label=f,t.push(m);var g={};g.from=l,g.to=v,i.push(g)}}catch(b){d.e(b)}finally{d.f()}}this.setState({graph:{nodes:t,edges:i}})}},{key:"render",value:function(){return(0,u.jsxs)("div",{className:"Businessview",children:[(0,u.jsxs)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("a",{className:"nav-link active",id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true",children:"Table"})}),(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("a",{className:"nav-link",id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false",children:"Treelist and Topology"})})]}),(0,u.jsxs)("div",{className:"tab-content",id:"myTabContent",children:[(0,u.jsx)("div",{className:"tab-pane fade show active",id:"home",role:"tabpanel","aria-labelledby":"home-tab",children:(0,u.jsx)("div",{className:"row view-table",children:(0,u.jsx)("div",{className:"col-md-12",id:"viewTableDiv",children:(0,u.jsx)("h3",{children:"Work in progress for real time table view"})})})}),(0,u.jsx)("div",{className:"tab-pane fade",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-4 treeview-div",children:(0,u.jsx)(p,{treeValue:this.state.treeValue,changeTopology:this.changeTopologyView.bind(this)})}),(0,u.jsx)("div",{className:"col-md-8 treeview-div",children:(0,u.jsx)(f,{nodeData:this.state.graph})})]})})]})]})}}]),i}(n.Component),T=function(e){(0,s.Z)(i,e);var t=(0,r.Z)(i);function i(e){var l;return(0,a.Z)(this,i),(l=t.call(this,e)).state={mockTableData:[],topologyView:!1},l}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){d().fn.extend({treed:function(e){var t="fa-minus",i="fa-plus";"undefined"!==typeof e&&("undefined"!==typeof e.openedClass&&(t=e.openedClass),"undefined"!==typeof e.closedClass&&(i=e.closedClass));var a=d()(this);a.addClass("tree"),a.find("li").has("ul").each((function(){var e=d()(this);e.prepend("<i class='fa "+i+"'></i>"),e.addClass("branch"),e.on("click",(function(e){this===e.target&&(d()(this).children("i:first").toggleClass(t+" "+i),d()(this).children().children().toggle())})),e.children().children().toggle()})),a.find(".branch .indicator").each((function(){d()(this).on("click",(function(){d()(this).closest("li").click()}))})),a.find(".branch>a").each((function(){d()(this).on("click",(function(e){d()(this).closest("li").click(),e.preventDefault()}))})),a.find(".branch>button").each((function(){d()(this).on("click",(function(e){d()(this).closest("li").click(),e.preventDefault()}))}))}})}},{key:"changeTopologyView",value:function(){this.setState({topologyView:o.event.target.checked})}},{key:"servedTopologyView",value:function(){return this.state.topologyView?(0,u.jsx)(N,{authToken:this.props.authToken,baseUrl:this.props.baseUrl,userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage,hideGlobalMessage:this.props.hideGlobalMessage}):(0,u.jsx)(S,{authToken:this.props.authToken,baseUrl:this.props.baseUrl,userId:this.props.userId,showGlobalMessage:this.props.showGlobalMessage,hideGlobalMessage:this.props.hideGlobalMessage,permissions:this.props.permissions})}},{key:"render",value:function(){var e=this;return(0,u.jsx)("div",{className:"centered-div View",children:(0,u.jsxs)("div",{className:"centered-div-header",children:[(0,u.jsxs)("div",{className:"row view-header",children:[(0,u.jsx)("div",{className:"col-sm-8",children:(0,u.jsx)("h6",{id:"view-header-title",children:"Topology view"})}),(0,u.jsx)("div",{className:"col-sm-4",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-sm-5",children:(0,u.jsx)("h6",{children:"Technical view"})}),(0,u.jsx)("div",{className:"col-sm-2",children:(0,u.jsxs)("div",{className:"custom-control custom-switch",children:[(0,u.jsx)("input",{checked:this.state.topologyView,onChange:function(t){return e.changeTopologyView(t)},type:"checkbox",className:"custom-control-input",id:"viewComponentChange"}),(0,u.jsx)("label",{className:"custom-control-label cursor-pointer",htmlFor:"viewComponentChange",children:"\xa0"})]})}),(0,u.jsx)("div",{className:"col-sm-5",children:(0,u.jsx)("h6",{children:"Business view"})})]})})]}),(0,u.jsx)("hr",{}),(0,u.jsx)("div",{className:"col-md-12",children:this.servedTopologyView()})]})})}}]),i}(n.Component)}}]);
//# sourceMappingURL=858.760a6033.chunk.js.map